RAG ã®å¿œç­”æ­£ç¢ºæ€§ã¨é€£ç¶šå¿œç­”æ€§èƒ½ã®è‡ªå‹•è©•ä¾¡

å²©é–“ å¤ª ç«¹å†… å¹¹é›„



æ—¥æœ¬ã‚¢ã‚¤ãƒ»ãƒ“ãƒ¼ãƒ»ã‚¨ãƒ æ ªå¼ä¼šç¤¾ æ±äº¬åŸºç¤ç ”ç©¶æ‰€



{gamma, mtake}@jp.ibm.com



æ¦‚è¦

RAG ã«åŸºã¥ãè³ªå•å¿œç­”ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã‚‹å¿œç­”ã®æ­£ç¢ºæ€§ã‚’è‡ªå‹•è©•ä¾¡ã™ã‚‹æ–¹æ³•ã‚’ææ¡ˆã™ã‚‹ã€‚
ç‰¹å¾´ã¯ã€çŸ¥è­˜ãƒ™ãƒ¼ã‚¹ä¸­ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ã€è³ªå•ã€æ­£ç­”ä¾‹ã¨åŒæ™‚ã«è€ƒæ…®ã—ã¦ã€ç”Ÿæˆå›ç­”ã‚’ LLM ã§è©•ä¾¡ã™ã‚‹ç‚¹ã§ã‚ã‚‹ã€‚
ç‰¹ã«ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®é¸ã³æ–¹ã«å·¥å¤«ã‚’æ–½ã™ã€‚
ã¾ãŸã€ãƒãƒ«ãƒã‚¿ãƒ¼ãƒ³ã®è³ªå•å¿œç­”ã«ãŠã‘ã‚‹é€£ç¶šå¿œç­”ã®æ€§èƒ½ã‚’æ¸¬ã‚‹ãŸã‚ã®è©•ä¾¡è¦³ç‚¹ã‚’å°å…¥ã—ã€ã“ã®è¦³ç‚¹ã§ã®è©•ä¾¡ã‚’è‡ªå‹•åŒ–ã™ã‚‹ã€‚
ãã®å¾Œã€äººæ‰‹è©•ä¾¡ã¨ã®ç›¸é–¢ã€ãŠã‚ˆã³ã€é€£ç¶šå¿œç­”æ€§èƒ½ã®å·®ã®æ¤œå‡ºã«åŸºã¥ã„ãŸè©•ä¾¡å®Ÿé¨“ã‚’å®Ÿæ–½ã—ã€ã“ã‚Œã‚‰ã®ææ¡ˆæ‰‹æ³•ã®æœ‰åŠ¹æ€§ã€å®ŸåŠ¹æ€§ã‚’ç¢ºèªã™ã‚‹ã€‚


1 ã¯ã˜ã‚ã«

RAGï¼ˆRetrieval-Augmented Generation, æ¤œç´¢æ‹¡å¼µç”Ÿæˆï¼‰ã¯ã€äº‹å‰ã«æº–å‚™ã•ã‚ŒãŸç‹¬è‡ªã®çŸ¥è­˜ãƒ™ãƒ¼ã‚¹ã«å¯¾ã—ã¦è³ªå•ã‚’å•ã„åˆã‚ã›ã€é–¢é€£çŸ¥è­˜ã‚’å«ã‚€æ–‡æ›¸ç­‰ã‚’æ¤œç´¢ã—ã€ãã®æ¤œç´¢çµæœ(ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ)ã‚’è³ªå•ã¨åŒæ™‚ã«LLM ã«å…¥åŠ›ã—ã¦å›ç­”ã‚’ç”Ÿæˆã™ã‚‹æŠ€è¡“ã§ã‚ã‚‹ã€‚
RAGã‚’ç”¨ã„ã‚‹ã“ã¨ã§ç‰¹å®šé ˜åŸŸã®å°‚é–€çš„ã§å›ºæœ‰ã®å¤–éƒ¨çŸ¥è­˜ã‚’åˆ©ç”¨ã—ãŸè‡ªå‹•çš„ãªè³ªå•å¿œç­”ã‚„ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ãŒå®Ÿç¾ã•ã‚Œã‚‹ã€‚
ä¾‹ãˆã°ã€è£½å“ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã‚„ã‚·ã‚¹ãƒ†ãƒ ã®é‹ç”¨ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã€ã‚‚ã—ãã¯ã€çµ„ç¹”å†…ã®ç‰¹å®šæ¥­å‹™(ä¾‹ãˆã°ã€æ‰¿èªã€æ³•å‹™ã€è³¼è²·ã€SDGs ãªã©)ã«é–¢é€£ã—ãŸæ–‡æ›¸ã«åŸºã¥ã„ãŸè³ªå•å¿œç­”ãƒãƒ£ãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ ãŒã€æ•°å¤šãé–‹ç™ºã•ã‚Œå§‹ã‚ã¦ãã¦ã„ã‚‹ã€‚
åŒæ™‚ã«ã€RAG ã«åŸºã¥ãè³ªå•å¿œç­”ã‚·ã‚¹ãƒ†ãƒ ã®æ§˜ã€…ãªè¦³ç‚¹ã‹ã‚‰ã®å®Ÿè·µçš„ãªãƒ†ã‚¹ãƒˆ/è©•ä¾¡æŠ€è¡“ã®å¿…è¦æ€§ã‚‚é«˜ã¾ã£ã¦ã„ã‚‹ã€‚
RAG ã®å‡ºåŠ›ã«ã¯ã€ç”Ÿæˆå›ç­”ã ã‘ã§ãªãã€æ–‡ç« ãƒªã‚¹ãƒˆãªã©ã®æ¤œç´¢çµæœã‚‚å«ã¾ã‚Œã‚‹ã€‚
RAG ã®è©•ä¾¡ã¯ã€ã“ã‚Œã‚‰ã®æ¤œç´¢çµæœã‚„æ¤œç´¢ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®æ§‹æˆã‚’è€ƒæ…®ã™ã‚‹ã“ã¨ã§ã€LLM å˜ä½“ã®è©•ä¾¡ã‚ˆã‚Šã‚‚ã€å¤šæ§˜ãªã‚‚ã®ã¨ãªã‚Šå¾—ã‚‹ã€‚
æœ¬è«–æ–‡ã§ã¯ã€ç¬¬ä¸€ã«ã€RAG ã«åŸºã¥ãè³ªå•å¿œç­”ã‚·ã‚¹ãƒ†ãƒ ã®å¿œç­”æ­£ç¢ºæ€§ã®è©•ä¾¡ã«ã¤ã„ã¦è«–ã˜ã€LLM ã‚’ç”¨ã„ãŸè‡ªå‹•åŒ–ã®æ–¹æ³•ã‚’ææ¡ˆã™ã‚‹ã€‚
ã“ã“ã§ã€å¿œç­”æ­£ç¢ºæ€§ã¨ã¯ã€ã€Œå›ç­”ã®è¡¨ç¾ã®ä»•æ–¹ã‚„ç²’åº¦ã®æ­£ã—ã•ã¯ä¸€æ„ã«ã¯å®šã¾ã‚‰ãªã„ãŒã€å›ç­”ã®æ­£ç¢ºã•ã¯(çŸ¥è­˜ãƒ™ãƒ¼ã‚¹ã®æƒ…å ±ã«åŸºã¥ãé™ã‚Š)æ˜ç¢ºã«åˆ¤æ–­ã§ãã‚‹é¡ã®è³ªå•ã«å¯¾ã™ã‚‹å¿œç­”ã®æ­£ç¢ºã•ã€ã‚’æŒ‡ã™ã€‚
ã“ã‚Œã¯ã€ä¾‹ãˆã°ã€DB(ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹)ã®çŸ¥è­˜ã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ãŸéš›ã€ã€ŒSQL ã«ãŠã„ã¦ UNION ã¨ UNION ALL ã®é•ã„ã¯ï¼Ÿã€ã€Œãƒ‡ãƒƒãƒ‰ãƒ­ãƒƒã‚¯ã¨ã¯ä½•ã‹ï¼Ÿã€ã¨ã„ã£ãŸè³ªå•ã‚’å¯¾è±¡ã«ã—ã€ã€Œæ–°ã—ã„è©©ã¨ã¯ï¼Ÿã€ã¨ã„ã£ãŸè³ªå•ã‚’æ‰±ã‚ãªã„ã“ã¨ã‚’æ„å‘³ã™ã‚‹ã€‚
ã“ã®ã‚ˆã†ãªæ„å‘³ã§ã®å¿œç­”æ­£ç¢ºæ€§ã¯ã€RAGã«ãŠã„ã¦è©•ä¾¡ã•ã‚Œã‚‹ã¹ãåŸºæœ¬çš„ãªèƒ½åŠ›ã¨è€ƒãˆã‚‰ã‚Œã‚‹ã€‚
å¿œç­”æ­£ç¢ºæ€§ã®è‡ªå‹•è©•ä¾¡ã¯ã€ä¾‹ãˆã°ã€è³ªå•ã”ã¨ã«æ­£ç­”ä¾‹ã‚’æº–å‚™ã—ã€ç”Ÿæˆå›ç­”ã¨æ¯”è¼ƒã™ã‚‹ã“ã¨ã§è¡Œã‚ã‚Œã‚‹ã€‚
ã“ã®æ¯”è¼ƒã«ã¯ã€ãƒ¯ãƒ¼ãƒ‰å˜ä½ã® recall [1]ã‚„BERTScore [2]ã€ã¾ãŸã¯ Prometheus [3, 4]ç­‰ã®è©•ä¾¡ç”¨ã® LLM ãªã©ã‚’ç”¨ã„ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚
ã¾ãŸã€RAG ã®è‡ªå‹•çš„ãªè©•ä¾¡ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨ã—ã¦ RAGAs [5]ãŒææ¡ˆã•ã‚Œã¦ãŠã‚Šã€ç”Ÿæˆå›ç­”ãŒæ¤œç´¢ã•ã‚ŒãŸã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«ã©ã‚Œã ã‘æº–æ‹ ã—ã¦ã„ã‚‹ã‹ãªã©ã€æ§˜ã€…ãªè¦³ç‚¹ã‹ã‚‰ã®è©•ä¾¡ã‚’ LLM ã‚’ä½¿ã£ã¦è‡ªå‹•åŒ–ã—ã¦ã„ã‚‹ã€‚
ã—ã‹ã—ãªãŒã‚‰ã€ä¸Šè¿°ã—ãŸæ–¹æ³•ã‚„ RAGAs ã«ã¯ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®æƒ…å ±ã‚’è€ƒæ…®ã—ã¦ã€ç”Ÿæˆå›ç­”ãŒæ­£ç­”ä¾‹ã¨æ¯”è¼ƒã—ã¦è³ªå•ã¸ã®å›ç­”ã¨ã—ã¦ã©ã‚Œã ã‘æ­£ç¢ºãªã®ã‹ã‚’ç›´æ¥è©•ä¾¡ã™ã‚‹è¦³ç‚¹ã¯å«ã¾ã‚Œã¦ã„ãªã„ã€‚
æœ¬è«–æ–‡ã§ã¯ã€ã“ã®è¦³ç‚¹ã‚’LLM ã‚’ç”¨ã„ã¦ç›´æ¥çš„ã«è©•ä¾¡ã™ã‚‹æ–¹æ³•ã‚’ææ¡ˆã™ã‚‹ã€‚
RAG ã®çŸ¥è­˜ãƒ™ãƒ¼ã‚¹ã«ã‚ã‚‹ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¯è†¨å¤§ã§ã‚ã‚Šã€ãã®å…¨ã¦ã‚’è©•ä¾¡ç”¨ LLM ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«å«ã‚ã‚‹ã“ã¨ã¯ã§ããªã„ã€‚
ãã“ã§æˆ‘ã€…ã¯ã€ç‰¹ã«äººæ‰‹è©•ä¾¡ã¨ã®ç›¸é–¢ã‚’æ¸¬ã‚‹ã“ã¨ã§ã€ã©ã®ã‚ˆã†ãªã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’åˆ©ç”¨ã—ãŸæ–¹ãŒè‰¯ã„ã®ã‹ã‚’è­°è«–ã™ã‚‹ã€‚
ç¬¬äºŒã«ã€æœ¬è«–æ–‡ã§ã¯ã€è³ªå•å¿œç­”ã«ãŠã‘ã‚‹é€£ç¶šå¿œç­”ã®æ€§èƒ½ã‚’è©•ä¾¡ã™ã‚‹æ–¹æ³•ã‚’ææ¡ˆã™ã‚‹ã€‚
è¿‘å¹´ã® RAG ã‚·ã‚¹ãƒ†ãƒ ã§ã¯ã€éå»ã®è³ªå•å¿œç­”ã®å±¥æ­´ã‚’è€ƒæ…®ã—ã¦æ¤œç´¢ã¨å›ç­”ç”Ÿæˆã‚’è¡Œã†ã“ã¨ã§ã€ãƒãƒ«ãƒã‚¿ãƒ¼ãƒ³ã®è³ªå•å¿œç­”ã‚’å¯èƒ½ã«ã—ã¦ã„ã‚‹ã€‚
æˆ‘ã€…ã¯ã€ä¸Šè¨˜ã®æ„å‘³ã§ã®å¿œç­”æ­£ç¢ºæ€§ã«ãŠã„ã¦ã€ã“ã®é€£ç¶šå¿œç­”ã®æ€§èƒ½ãŒã©ã®ã‚ˆã†ã«è©•ä¾¡ã•ã‚Œã‚‹ã¹ãã‹ã‚’è€ƒãˆãŸã„ã€‚
ãƒãƒ«ãƒã‚¿ãƒ¼ãƒ³ã®å¯¾è©±ã‚’è©•ä¾¡ã™ã‚‹æ–¹æ³•ã¨ã—ã¦ã¯ã€å›ç­”ã«ä¾å­˜ã—ãªã„ä¸€é€£ã®è³ªå•ã‚’æ¨™æº–çš„ãªè©•ä¾¡ç”¨ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¨ã—ã¦æº–å‚™ã™ã‚‹æ–¹æ³•[6]ã‚„ã€ä¸€é€£ã®è³ªå•ã¨å¿œç­”ã‚’ç”Ÿæˆã—ãã®è‡ªç„¶ã•ã‚’â€• 3563 â€•Q;A(Qã¨Aã‚’é©å½“ã«é€£çµã—ãŸæ–‡å­—åˆ—)LLMs forgeneratingscore andreview textCreatingprompt forjudging RAG è©•ä¾¡ã‚¹ã‚³ã‚¢5,â€¦,1, 0RAG's Answer Judgement ModuleA: Gold Answer Q: Question RAG based Q/A system(to be evaluated)RAG based Q/A system(same as above)Qã«å¯¾ã™ã‚‹ç”Ÿæˆå›ç­”Qã§æ¤œç´¢ã—ãŸã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¬ãƒ“ãƒ¥ãƒ¼æ–‡targetanswercontextsreference answerquestionQ:Aã«å¯¾ã™ã‚‹ç”Ÿæˆå›ç­”Q:Aã§æ¤œç´¢ã—ãŸã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå›³ 1 RAG ã®å¿œç­”æ­£ç¢ºæ€§ã‚’è‡ªå‹•è©•ä¾¡ã™ã‚‹ãŸã‚ã®è©•ä¾¡ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³è©•ä¾¡ã™ã‚‹æ–¹æ³•[7]ãªã©ãŒææ¡ˆã•ã‚Œã¦ã„ã‚‹ãŒã€ã“ã‚Œã‚‰ã¯æˆ‘ã€…ã®ç›®çš„ã«ååˆ†ã«ã¯é©ã—ã¦ã¯ã„ãªã„ã€‚
RAG ã¯ç‰¹å®šé ˜åŸŸå‘ã‘ã§ã‚ã‚‹ã“ã¨ãŒå¤šãã€æ±ç”¨çš„ãªè©•ä¾¡ç”¨ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§ã®è©•ä¾¡ã¯åŠ¹æœçš„ã¨ã¯è¨€ãˆãšã€ã¾ãŸã€å›ç­”ã®æ­£ç¢ºæ€§ãŒè©•ä¾¡ã•ã‚Œã‚‹å ´é¢ã§ã€å¯¾è©±ã®è‡ªç„¶ã•ã‚’è©•ä¾¡ã™ã‚‹ã“ã¨ã‚‚åŠ¹æœçš„ã¨ã¯è¨€ãˆãªã„ã‹ã‚‰ã§ã‚ã‚‹ã€‚
æœ¬è«–æ–‡ã§ã¯ã€è³ªå•ã¨æ­£ç­”ä¾‹ã‹ã‚‰ãªã‚‹è©•ä¾¡ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’æƒ³å®šã—ã€ã€Œè©•ä¾¡å¯¾è±¡ RAG ã¨ã®é€£ç¶šè³ªå•å¿œç­”ã§ã€å„è³ªå•ã«å¯¾ã—ã¦ã€ãã®æ­£ç­”ä¾‹ã®ã©ã®ç¨‹åº¦ã®æƒ…å ±ã‚’ã€ã©ã®ç¨‹åº¦ã®å¯¾è©±å›æ•°ã§ã€å¾—ã‚‹ã“ã¨ãŒã§ãã‚‹ã‹ã€ã¨ã„ã†è¦³ç‚¹ã‹ã‚‰ã®è©•ä¾¡ã‚’è€ƒãˆã‚‹ã€‚
ãã—ã¦ã€LLM ã«åŸºã¥ãé©åˆ‡ãªå›ç­”åˆ¤å®šã€ è³ªå•ç”Ÿæˆã€ å›ç­”æ§‹æˆã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ç”¨ã„ã¦ã€ã“ã®è¦³ç‚¹ã§ã®è©•ä¾¡ã‚’è‡ªå‹•åŒ–ã™ã‚‹ã€‚


2 å¿œç­”æ­£ç¢ºæ€§ã®è‡ªå‹•è©•ä¾¡

è©•ä¾¡ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ã€è³ªå•ã¨æ­£ç­”ä¾‹ã‹ã‚‰ãªã‚‹çµ„ã¿ã®ã‚»ãƒƒãƒˆã‚’æƒ³å®šã—ã€RAG ã®å¿œç­”æ­£ç¢ºæ€§ã‚’è‡ªå‹•è©•ä¾¡ã™ã‚‹æ‰‹æ³•ã‚’æ§‹ç¯‰ã™ã‚‹ã€‚
åŸºæœ¬çš„ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¯ã€Prometheus [4]ã¨åŒæ§˜ã«ã€è©•ä¾¡ç”¨ã® LLM ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«æ­£ç¢ºã•ã®åˆ¤å®šåŸºæº–ã‚’ğ‘˜ (= 6)æ®µéšã§ä¸ãˆã€ç”Ÿæˆå›ç­”ã‚’ ğ‘˜ æ®µéšã§è©•ä¾¡ã™ã‚‹ã“ã¨ã§ã‚ã‚‹ã€‚
ãŸã ã—æˆ‘ã€…ã¯ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ(æ¤œç´¢çµæœã®æ–‡ç« ãƒªã‚¹ãƒˆ)ã®æƒ…å ±ã‚‚ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«å«ã‚ã‚‹ã“ã¨ã¨ã™ã‚‹ã€‚
çµæœã¨ã—ã¦ã€è©•ä¾¡ç”¨ LLM ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«ã¯ã€è³ªå•ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã€æ­£ç­”ä¾‹ã€ç”Ÿæˆå›ç­”ãŒå«ã¾ã‚Œã€ã“ã‚Œã‚‰ã®æƒ…å ±ã«åŸºã¥ãç”Ÿæˆå›ç­”ã®æ­£ç¢ºæ€§ãŒ 6 æ®µéš: è‰¯ã„ã€œæ‚ªã„(5, . . . , 1), ç„¡è©•ä¾¡(0)ã§è©•ä¾¡ã•ã‚Œã‚‹ã“ã¨ã¨ãªã‚‹ã€‚
ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ¦‚è¦ã‚’ä»˜éŒ²ã®å›³ 5 ã«ç¤ºã™ã€‚
ã“ã“ã§ã€è©•ä¾¡æ™‚ã«ä½¿ç”¨ã™ã‚‹ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«ã¤ã„ã¦è€ƒãˆãŸã„ã€‚
è³ªå•ã§æ¤œç´¢ã—ãŸçµæœã§ã‚ã‚‹(å›ç­”ç”Ÿæˆæ™‚ã«ä½¿ç”¨ã—ãŸ)ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’è©•ä¾¡æ™‚ã«ä½¿ç”¨ã™ã‚‹ã¨ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãŒæ­£ç­”ã®æƒ…å ±ã‚’å«ã‚“ã§ã„ãªãã¨ã‚‚ã€ç”Ÿæˆå›ç­”ãŒã€(æ­£ã—ã„æƒ…å ±ã ã¨è¦‹åšã•ã‚Œã‚‹)ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«æº–æ‹ ã—ã¦ã„ã‚‹ã¨ã„ã†ç‚¹ã§ã€é«˜ã„ã‚¹ã‚³ã‚¢ãŒå‡ºã‚‹å¯èƒ½æ€§ãŒè€ƒãˆã‚‰ã‚Œã‚‹ã€‚
ãã“ã§æˆ‘ã€…ã¯ã€ã“ã®å¯èƒ½æ€§ã‚’è»½æ¸›ã™ã‚‹ãŸã‚ã«ã€è³ªå•ã¨æ­£ç­”ä¾‹ã‚’åŒæ™‚ã«ç”¨ã„ã¦æ¤œç´¢ã—ãŸã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’è©•ä¾¡æ™‚ã«ç”¨ã„ã‚‹ã“ã¨ã‚’ææ¡ˆã™ã‚‹ã€‚

2.1 ææ¡ˆæ‰‹æ³• I

RAG ã®å¿œç­”æ­£ç¢ºæ€§ã‚’è‡ªå‹•çš„ã«è©•ä¾¡ã™ã‚‹è©•ä¾¡ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’å›³ 1 ã«ç¤ºã™ã€‚
è©•ä¾¡ãƒ‡ãƒ¼ã‚¿(è³ªå•ã€ æ­£ç­”ä¾‹)ã”ã¨ã«ã€RAG ã§è³ªå•ã‹ã‚‰å›ç­”ã‚’ç”Ÿæˆã—ã€æ¬¡ã«è³ªå•ã¨æ­£ç­”ä¾‹ã‚’ç”¨ã„ã¦ RAG ã§ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’æ¤œç´¢ã—ã€æœ€å¾Œã«ã€ã“ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’æ­£ã—ã„æƒ…å ±ã¨è¦‹åšã—ã€æ­£ç­”ä¾‹ã‚’æœ€é«˜ã‚¹ã‚³ã‚¢ 5 ã®å‚ç…§å›ç­”ã¨ã—ãŸéš›ã€ç”Ÿæˆå›ç­”ãŒè³ªå•ã®å›ç­”ã¨ã—ã¦ã©ã®ç¨‹åº¦æ­£ç¢ºãªã®ã‹ã‚’ 6 æ®µéšã®ã‚¹ã‚³ã‚¢ã§è©•ä¾¡ã™ã‚‹ã€‚
ãã®ä¸Šã§ã€ä¾‹ãˆã°ã€ã“ã®ã‚¹ã‚³ã‚¢ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§ã®(ã‚¹ã‚³ã‚¢ 0 ã‚’é™¤å¤–ã—ãŸ)
å¹³å‡ãŒã€RAG ã®å¿œç­”æ­£ç¢ºæ€§ã‚’è¡¨ã™æŒ‡æ¨™ã«ãªã‚‹ã€‚
RAGAs [5]ã¨ãã®å®Ÿè£…ãƒ©ã‚¤ãƒ–ãƒ©ãƒª[8]ã§ã¯ã€RAGã®è©•ä¾¡æŒ‡æ¨™ãŒã€(ç¾çŠ¶ã§) 8 ã¤æç¤ºã•ã‚Œã¦ã„ã‚‹ã€‚
ä¾‹ãˆã°ã€Faithfulness ã¯ã€ç”Ÿæˆå›ç­”ãŒè³ªå•ã§æ¤œç´¢ã—ãŸã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«ã©ã‚Œã ã‘æº–æ‹ ã—ã¦ã„ã‚‹ã‹ã‚’è©•ä¾¡ã—ã€Context Recall ã¯ã€åŒã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®æœ‰åŠ¹ã•ã‚’ã€æ­£ç­”ä¾‹ã¨æ¯”è¼ƒã—è©•ä¾¡ã™ã‚‹ã€‚
ã—ã‹ã—ç”Ÿæˆå›ç­”ã®æ­£ç¢ºæ€§ã‚’ç›´æ¥çš„ã«è©•ä¾¡ã™ã‚‹è¦³ç‚¹ã¯å«ã¾ã‚Œã¦ã„ãªã„ã€‚
ãã®ãŸã‚ã«ã¯ã€ä¸Šè¨˜ã®ã‚ˆã†ãªã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®æœ‰åŠ¹ã•ã‚’å‰æã¨ã—ã¦ã„ã‚‹æŒ‡æ¨™ã¨ã€ãã®æœ‰åŠ¹ã•ã‚’è©•ä¾¡ã—ã¦ã„ã‚‹æŒ‡æ¨™ã‚’çµ„ã¿åˆã‚ã›ã‚‹å¿…è¦ãŒç”Ÿã˜ã‚‹ã€‚
æœ¬ææ¡ˆæ‰‹æ³•ã¯ã€ãã®çµ„ã¿åˆã‚ã›ã®ä¸€ä¾‹ã¨è€ƒãˆã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚


2.2 è©•ä¾¡å®Ÿé¨“ã¨è€ƒå¯Ÿ I

ææ¡ˆæ‰‹æ³•ã®æœ‰åŠ¹æ€§ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã«ã€IBM Z [9]ã¨ãã®é–¢é€£è£½å“ã«é–¢ã™ã‚‹æ–‡æ›¸ã‚’çŸ¥è­˜ãƒ™ãƒ¼ã‚¹ã¨ã—ã¦ä½¿ç”¨ã™ã‚‹ RAG ã«åŸºã¥ã Q/A ã‚·ã‚¹ãƒ†ãƒ (QA)ã‚’æº–å‚™ã—ãŸã€‚
ã“ã‚Œã¯è£½å“ watsonx Assistant for Z [10]ã®å¯¾è©±å‹Q/A æ©Ÿèƒ½ã®å®Ÿé¨“ç”¨åˆæœŸãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ã®ä¸€ã¤ã§ã‚ã‚‹ã€‚
Db2 ã«é–¢ã™ã‚‹ 132 å€‹ã®è³ªå•ã¨æ­£ç­”ä¾‹ã‹ã‚‰ãªã‚‹è©•ä¾¡ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ(å…¨ã¦è‹±èª)ã‚’æº–å‚™ã—ã€QA ã§å›ç­”ã‚’ç”Ÿæˆã—ã€ãã®å›ç­”ã‚’æ¬¡ã®ï¼“ç¨®ã®æ–¹æ³•ã§è©•ä¾¡ã—ãŸ: (E1)å°‚é–€å®¶ã«ã‚ˆã‚‹ 6 æ®µéšè©•ä¾¡; (E2)è³ªå•ã§æ¤œç´¢ã—ãŸã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ç”¨ã„ãŸ LLM ã«ã‚ˆâ€• 3564 â€•ã‚‹è©•ä¾¡; (E3)ææ¡ˆæ‰‹æ³•ã§ã®è©•ä¾¡(è³ªå•ã¨æ­£ç­”ä¾‹ã§æ¤œç´¢ã—ãŸã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ç”¨ã„ãŸ LLM ã«ã‚ˆã‚‹è©•ä¾¡)ã€‚
è©•ä¾¡åŸºæº–ã¯ææ¡ˆæ‰‹æ³•ã¨å…¨ã¦åŒã˜ã§ã‚ã‚‹ã€‚
ãã®å¾Œã€äººæ‰‹è©•ä¾¡(E1)ã¨ LLM ã«ã‚ˆã‚‹è©•ä¾¡(E2, E3)ã¨ã®ç›¸é–¢ã‚’è¨ˆæ¸¬ã—ãŸã€‚
çµæœã‚’å›³ 2 ã«ç¤ºã™ã€‚
è©•ä¾¡ç”¨LLM ã¨ã—ã¦ã¯ã€prometheus-8x7b-v2 [11], mixtral-8x7b- instruct-v01 [12], llama-3-1-70b-instruct [13]ã‚’ç”¨ã„ãŸã€‚
å°‚é–€å®¶è©•ä¾¡(E1): 4.007576word recall:  0.763517rougeL : 0.122036bert score:0.750147prometheus(E2):4.530303mixtral(E2):4.348485llama3(E2):3.742424Prometheus(E3):4.143939mixtral(E3):4.128788llama3(E3):3.734848å¹³å‡å€¤(ã‚¹ã‚³ã‚¢ï¼ã‚’é™¤å¤–ã—ãŸå¹³å‡)å°‚é–€å®¶è©•ä¾¡(E1): 1.000000word recall:  0.494306rougeL : 0.357340bert score:0.082107prometheus(E2):0.593374mixtral(E2):0.706555llama3(E2):0.805254Prometheus(E3):0.758834mixtral(E3):0.739532llama3(E3):0.891785å°‚é–€å®¶è©•ä¾¡ã¨ã®ç›¸é–¢å›³ 2 å¿œç­”æ­£ç¢ºæ€§ã«é–¢ã™ã‚‹è©•ä¾¡å®Ÿé¨“ã®çµæœ: E1,E2,E3 ã®è©•ä¾¡ã‚¹ã‚³ã‚¢(ã®å¹³å‡) ğ‘  ã¯ã€ 1 (æœ€ã‚‚æ‚ªã„) â‰¤ ğ‘  â‰¤ 5 (æœ€ã‚‚è‰¯ã„).å›³ 2 ã«ã‚ˆã‚‹ã¨ã€è©•ä¾¡ã‚¹ã‚³ã‚¢ã®å¹³å‡ã¯ã€ï¼“ç¨®ã®ã©ã®LLM ã‚’ç”¨ã„ãŸã¨ã—ã¦ã‚‚ã€E2 è©•ä¾¡ã®æ–¹ãŒ E3 è©•ä¾¡ã‚ˆã‚Šã‚‚é«˜ã„ã€‚
ä¸€æ–¹ã§ã€äººæ‰‹è©•ä¾¡(E1)ã¨ã®ç›¸é–¢ä¿‚æ•°ã¯ã€ã©ã® LLM ã‚’ç”¨ã„ãŸã¨ã—ã¦ã‚‚ã€E3 è©•ä¾¡ã®æ–¹ãŒ E2 è©•ä¾¡ã‚ˆã‚Šã‚‚é«˜ã„ã€‚
ã“ã‚Œã¯ã€ç”Ÿæˆå›ç­”ã‚’ã€è³ªå•ã¨æ­£ç­”ä¾‹ã§æ¤œç´¢ã—ãŸã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ç”¨ã„ã¦ LLM ã§è©•ä¾¡ã—ãŸæ–¹ãŒã€E2 è©•ä¾¡ã¨æ¯”ã¹ã¦ã€ã‚ˆã‚Šäººé–“ã®è©•ä¾¡ã«è¿‘ããªã£ãŸã“ã¨ã‚’ç¤ºã—ã¦ã„ã‚‹ã€‚
ã¾ãŸã€è³ªå•ã§æ¤œç´¢ã—ãŸ(ãã—ã¦å›ç­”ç”Ÿæˆã«ä½¿ç”¨ã—ãŸ)
ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’åˆ©ç”¨ã™ã‚‹ã¨ã€E3è©•ä¾¡ã¨æ¯”ã¹ã¦ã€è©•ä¾¡ã‚¹ã‚³ã‚¢ãŒå¹³å‡çš„ã«ä¸ŠæŒ¯ã‚Œã™ã‚‹å‚¾å‘ã«ã‚ã£ãŸã“ã¨ã‚‚ç¤ºã—ã¦ã„ã‚‹ã€‚
ã¾ãŸã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ç”¨ã„ãŸ E2, E3 ã«ã‚ˆã‚‹è©•ä¾¡æŒ‡æ¨™ã¯ã€(ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’åˆ©ç”¨ã›ãš)ç”Ÿæˆå›ç­”ã¨æ­£ç­”ä¾‹ã®ã‚ã‚‹ç¨®ã®é¡ä¼¼åº¦ã‚’è¨ˆç®—ã™ã‚‹ word recall, rouge-long, bert score ãªã©ã®æŒ‡æ¨™ã‚ˆã‚Šã‚‚ã€äººé–“ã®è©•ä¾¡ã¨ã®ç›¸é–¢ãŒå¤§å¹…ã«é«˜ããªã£ãŸã€‚
ã“ã®å®Ÿé¨“çµæœã¯ã€E3 ã«ã‚ˆã‚‹è©•ä¾¡ã€ã¤ã¾ã‚Šã€ææ¡ˆæ‰‹æ³•ã®ä¸€å®šã®æœ‰åŠ¹æ€§ã‚’ç¤ºã—ã¦ã„ã‚‹ã¨è€ƒãˆã‚‰ã‚Œã‚‹ã€‚


3 é€£ç¶šå¿œç­”æ€§èƒ½ã®è‡ªå‹•è©•ä¾¡

æ¬¡ã«ã€RAG ã®é€£ç¶šå¿œç­”æ€§èƒ½ã‚’è‡ªå‹•è©•ä¾¡ã™ã‚‹æ‰‹æ³•ã‚’æ§‹ç¯‰ã™ã‚‹ã€‚
ã“ã“ã§ã‚‚è©•ä¾¡ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¨ã—ã¦ã¯ã€è³ªå•ã¨æ­£ç­”ä¾‹ã‹ã‚‰ãªã‚‹çµ„ã®ã‚»ãƒƒãƒˆã‚’æƒ³å®šã™ã‚‹ã€‚
è³ªå•å¿œç­”ã®æ­£ç¢ºæ€§ã«ãŠã„ã¦ã€RAG ã«åŸºã¥ã Q/Aã‚·ã‚¹ãƒ†ãƒ ã®é€£ç¶šå¿œç­”ã®æ€§èƒ½ã‚’è©•ä¾¡ã™ã‚‹ãŸã‚ã«ã€ä»¥ä¸‹ã®ã‚ˆã†ãªè¦³ç‚¹ã‚’è€ƒãˆã‚‹ï¼šã€Œé©å½“ãªè³ªå•è€…ã‚’ä»®å®šã—ãŸã¨ãã€å„è³ªå•ã«å¯¾ã—ã¦ã€ãã®è³ªå•ã‹ã‚‰å§‹ã¾ã‚‹ Q/A ã‚·ã‚¹ãƒ†ãƒ ã¨ã®é€£ç¶šè³ªå•å¿œç­”ã«ã‚ˆã£ã¦ã€æ­£ç­”ä¾‹ã®æƒ…å ±ã‚’ï¼ˆã©ã®ç¨‹åº¦ã®æƒ…å ±ã¾ã§ã€ã©ã®ç¨‹åº¦ã®å¯¾è©±å›æ•°ã§ï¼‰å¾—ã‚‹ã“ã¨ãŒã§ãã‚‹ã®ã‹ï¼Ÿã€è³ªå•å¿œç­”ã«ãŠã‘ã‚‹ Q/A ã‚·ã‚¹ãƒ†ãƒ ã¨ã®å¯¾è©±ã§ã¯ã€è³ªå•ã®æ„å›³ãŒæ­£ã—ãè§£é‡ˆã•ã‚Œãªã„ã€å›ç­”ãŒååˆ†ã«è©³ç´°ã§ãªã„ã€ã¾ãŸã¯å›ç­”ãŒä¸æ­£ç¢ºã«æ„Ÿã˜ã‚‰ã‚Œã‚‹ã¨ã„ã£ãŸç†ç”±ã‹ã‚‰ã€è³ªå•ã®è¡¨ç¾ã‚„å†…å®¹ã‚’ä¿®æ­£ã—ãŸã‚Šã€è³ªå•ã‚’ç°¡ç•¥åŒ–ã—ã¦éƒ¨åˆ†çš„ãªå†…å®¹ã‚’å°‹ã­ã‚‹è©¦è¡ŒãŒé »ç¹ã«è¦‹ã‚‰ã‚Œã‚‹ã€‚
ã“ã®ã‚ˆã†ãªæ®µéšçš„ãªæƒ…å ±å–å¾—ã®ãƒ—ãƒ­ã‚»ã‚¹ã¯ã€è³ªå•å¿œç­”ã®å¯¾è©±ã¨ã—ã¦åºƒãè¡Œã‚ã‚Œã¦ã„ã‚‹ã€‚
ãã®ãŸã‚ã€ä¸Šè¨˜ã®è¦³ç‚¹ã‹ã‚‰ã®è©•ä¾¡ã¯ã€Q/A ã‚·ã‚¹ãƒ†ãƒ ãŒæŒã¤ã€å¿œç­”ã®æ­£ç¢ºã•ã«é–¢ã™ã‚‹é€£ç¶šå¿œç­”èƒ½åŠ›ã®é‡è¦ãªå´é¢ã‚’ç¤ºã—ã¦ã„ã‚‹ã¨è€ƒãˆã‚‰ã‚Œã‚‹ã€‚
æœ¬è«–æ–‡ã§ã¯ã€ã“ã®è¦³ç‚¹ã‹ã‚‰ã®è©•ä¾¡ã‚’ã€LLM ã‚’ç”¨ã„ã¦é©åˆ‡ã«å®Ÿç¾ã•ã‚Œã‚‹å›ç­”åˆ¤å®šã€è³ªå•ç”Ÿæˆã€å›ç­”æ§‹æˆã‚’è¡Œã†ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ã‚ˆã‚Šè‡ªå‹•åŒ–ã™ã‚‹ã€‚


3.1 ææ¡ˆæ‰‹æ³• II

RAG ã®å¿œç­”æ­£ç¢ºæ€§ã«é–¢ã™ã‚‹é€£ç¶šå¿œç­”æ€§èƒ½ã‚’è‡ªå‹•çš„ã«è©•ä¾¡ã™ã‚‹è©•ä¾¡ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’å›³ 3 ã«ç¤ºã™ã€‚
å…¨ä½“ã¨ã—ã¦ã€è©•ä¾¡ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆä¸­ã®å„ãƒšã‚¢(å¯¾è±¡è³ªå•ã€ æ­£ç­”ä¾‹)ã«å¯¾ã—ã€ä»¥ä¸‹ã®ã‚¿ã‚¹ã‚¯(T1..T7)ã«ã‚ˆã‚‹å‡¦ç†ã‚’ç¹°ã‚Šè¿”ã—è¡Œã†ã“ã¨ã§ã€å„ã‚¿ãƒ¼ãƒ³ã®(æš«å®š)å›ç­”ã«å¯¾ã™ã‚‹è©•ä¾¡ã‚¹ã‚³ã‚¢ã‚’å«ã‚€ãƒªã‚¹ãƒˆã‚’è¿”ã™ã¨ã„ã†ã‚‚ã®ã§ã‚ã‚‹:(T1)è©•ä¾¡å¯¾è±¡ã® RAG ã«è³ªå•ã‚’ã—å›ç­”ã‚’ç”Ÿæˆã—ã€è³ªå•ã¨ç”Ÿæˆå›ç­”ã‚’ Q/A å±¥æ­´ã«ä¿å­˜ã™ã‚‹; (T2) Q/A å±¥æ­´ã‹ã‚‰å¯¾è±¡è³ªå•ã«å¯¾ã™ã‚‹(æš«å®šçš„ãª)å›ç­”ã‚’æ§‹æˆã™ã‚‹;(T3)ãã®æ§‹æˆå›ç­”ã‚’è©•ä¾¡ã—ã¦è©•ä¾¡ã‚¹ã‚³ã‚¢ã¨ãƒ¬ãƒ“ãƒ¥ãƒ¼æ–‡ã‚’ç”Ÿæˆã™ã‚‹ã€‚
è©•ä¾¡ã‚¹ã‚³ã‚¢ãŒ 5 ã§ã‚ã‚Œã°æ­£ç­”ãŒå¾—ã‚‰ã‚ŒãŸã®ã§çµ‚äº†; (T4)ãƒ¬ãƒ“ãƒ¥ãƒ¼æ–‡ã«åŸºã¥ã„ã¦ã€å®Œå…¨ãªå›ç­”ã‚’å¾—ã‚‹ãŸã‚ã®ã•ã‚‰ãªã‚‹è³ªå•ãŒå¿…è¦ã§ã‚ã‚‹ã‹ã©ã†ã‹ã‚’åˆ¤æ–­ã™ã‚‹; (T5)è³ªå•ãŒå¿…è¦ã§ã‚ã‚Œã°æ¬¡ã®è³ªå•ã‚’ç”Ÿæˆã—ã€æœ€å¤§ä¼šè©±ã‚¿ãƒ¼ãƒ³æ•°ã«é”ã—ã¦ã„ãªã‘ã‚Œã°(T1)ã¸; (T6)è³ªå•ãŒå¿…è¦ãªã‘ã‚Œã°ã€ç¾åœ¨ã®æ§‹æˆå›ç­”ã‚’æ­£ç­”ä¾‹ã®ç²’åº¦ã«æ›¸ãç›´ã—ã¦æœ€çµ‚å›ç­”ã«ã™ã‚‹; (T7)æœ€çµ‚å›ç­”ã‚’è©•ä¾¡ã—ã¦è©•ä¾¡ã‚¹ã‚³ã‚¢ã‚’å‡ºã—çµ‚äº†ã™ã‚‹ã€‚
ä¸Šè¨˜ã‚¿ã‚¹ã‚¯(T3, T7)ã¯å›ç­”è©•ä¾¡ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒã€(T2, T6)ã¯å›ç­”æ§‹æˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒã€(T4, T5)ã¯è³ªå•ç”Ÿæˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒã€ãã‚Œãã‚Œæ‹…å½“ã™ã‚‹å‡¦ç†ã§ã‚ã‚‹ã€‚
å‚è€ƒã¨ã—ã¦å„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒåŸºã¥ã LLM ãŒä½¿ç”¨ã™ã‚‹ãƒ—ãƒ­ãƒ³ãƒˆã®æ¦‚è¦ã‚’ä»˜éŒ²ã®å›³ 5, 6, 7 ã«ç¤ºã™ã€‚
å›ç­”è©•ä¾¡ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¯ 2 ç¯€ã®å¿œç­”æ­£ç¢ºæ€§ã‚’è©•ä¾¡ã™ã‚‹ LLM ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¨åŒã˜ã§ã‚ã‚Šã€ãã“ã§ä½¿ç”¨ã•ã‚Œã‚‹ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚‚å…ƒã®å¯¾è±¡è³ªå•ã¨æ­£ç­”ä¾‹ã‹ã‚‰æ¤œç´¢ã—ã¦å¾—ã‚‰ã‚Œã‚‹ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§ã‚ã‚‹ã€‚
çµæœã€æœ€å¤§ã‚¿ãƒ¼ãƒ³æ•° ğ‘› ã«å¯¾ã—ã€è³ªå•ã¨æ­£ç­”ä¾‹ã‹ã‚‰è©•ä¾¡ã‚¹ã‚³ã‚¢ãƒªã‚¹ãƒˆ ğœ = [ğ‘ 0, . . . , ğ‘ ğ‘˜](0 â‰¤ ğ‘˜ < ğ‘›)ãŒå¾—ã‚‰â€• 3565 â€•è©•ä¾¡å¯¾è±¡ã®RAG (Q/Aã‚·ã‚¹ãƒ†ãƒ )ã«ã‚ˆã£ã¦ã€å…¥åŠ›ã•ã‚ŒãŸè³ªå•ã‹ã‚‰å›ç­”ã‚’ç”Ÿæˆã™ã‚‹(è©•ä¾¡ã‚¹ã‚³ã‚¢ãŒ5ã§ãªã„å ´åˆ)ãƒ¬ãƒ“ãƒ¥ãƒ¼æ–‡ã€ æ§‹æˆã•ã‚ŒãŸ(æš«å®šçš„)å›ç­”ã€ Q/Aå±¥æ­´ã€ å¯¾è±¡è³ªå•ã«åŸºã¥ãã€ã•ã‚‰ãªã‚‹è³ªå•ãŒå¿…è¦ã‹ã©ã†ã‹ã‚’åˆ¤æ–­ã™ã‚‹(è³ªå•ãŒå¿…è¦ãªã„å ´åˆ) ãƒ¬ãƒ“ãƒ¥ãƒ¼æ–‡ã€ Q/Aå±¥æ­´ã€ å¯¾è±¡è³ªå•ã€æ­£ç­”ä¾‹ã«åŸºã¥ãã€æ§‹æˆå›ç­”ã‚’æ­£ç­”ä¾‹ã®ç²’åº¦ã«æ²¿ã£ãŸã€ã—ã‹ã—ã€æ­£ç­”ä¾‹ã®ã¿ã«å«ã¾ã‚Œã‚‹æƒ…å ±ã‚’å«ã¾ãªã„ã€æœ€çµ‚å›ç­”ã«æ›¸ãç›´ã™(è³ªå•ãŒå¿…è¦ãªå ´åˆ) ãƒ¬ãƒ“ãƒ¥ãƒ¼æ–‡ã€ æ§‹æˆã•ã‚ŒãŸ(æš«å®šçš„)å›ç­”ã€ Q/Aå±¥æ­´ã€ å¯¾è±¡è³ªå•ã‹ã‚‰æ¬¡ã®è³ªå•ã‚’ç”Ÿæˆã™ã‚‹å¯¾è±¡è³ªå•ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã€æ­£ç­”ä¾‹ã«åŸºã¥ãã€æœ€çµ‚å›ç­”ã®è©•ä¾¡ã‚¹ã‚³ã‚¢ã‚’ç”Ÿæˆã™ã‚‹è©•ä¾¡ã‚¹ã‚³ã‚¢ãŒï¼•(æœ€é«˜ã‚¹ã‚³ã‚¢ã®å›ç­”ã¨åˆ¤æ–­)ã®å ´åˆã€çµ‚äº†ã€ çµ‚äº†Tar g e t  Q u e s t io n , Gold AnswerQ/Aå±¥æ­´(è³ªå•ã¨å›ç­”ã®ãƒšã‚¢ã®ãƒªã‚¹ãƒˆ)è©•ä¾¡ã‚¹ã‚³ã‚¢ã®ãƒªã‚¹ãƒˆNext question2. Generate a tentative answer3. Judge the tentative answer 4. Decide to keep asking questions5. Generate next query6. Formatting the answer7. Judge the answerâ€¢å…¥åŠ›: Target Question, and  Gold Answer (å¯¾è±¡è³ªå•ã¨æ­£ç­”ä¾‹)â€¢å‡ºåŠ›: è©•ä¾¡ã‚¹ã‚³ã‚¢ã®ãƒªã‚¹ãƒˆ(e.g., [3,3,4,5])â€¢ LLMã«åŸºã¥ãä»¥ä¸‹ã®ï¼“ç¨®é¡ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ç”¨ã„ã‚‹â€¢å›ç­”åˆ¤å®šã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ(Task 3 and 7)â€¢å›ç­”æ§‹æˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ(Task 2 and 6)â€¢è³ªå•ç”Ÿæˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ(Task 4 and 5)1. Q/Aå¯¾è±¡è³ªå•ã€Q/Aå±¥æ­´ã®æƒ…å ±ã«åŸºã¥ã„ã¦ã€å¯¾è±¡ã®è³ªå•ã«å¯¾ã™ã‚‹(æš«å®šçš„ãª)å›ç­”ã‚’æ§‹æˆã™ã‚‹å¯¾è±¡è³ªå•ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã€æ­£ç­”ä¾‹ã«åŸºã¥ãã€æ§‹æˆã•ã‚ŒãŸå›ç­”ã®è©•ä¾¡ã‚¹ã‚³ã‚¢ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼æ–‡ã‚’ç”Ÿæˆã™ã‚‹turn num+= 1If turn num< max turnIf turn num>= max turnå›³ 3 RAG ã®å¿œç­”æ­£ç¢ºæ€§ã«é–¢ã™ã‚‹é€£ç¶šå¿œç­”æ€§èƒ½ã‚’è‡ªå‹•è©•ä¾¡ã™ã‚‹ãŸã‚ã®è©•ä¾¡ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚Œã‚‹ã€‚
ğœ ã¯ä»¥ä¸‹ã® 3 ç¨®ã®æŒ‡æ¨™ã‚¹ã‚³ã‚¢ã§è©•ä¾¡ã•ã‚Œã‚‹ã€‚
wscore(ğœ) =ğ‘›ğ‘ 0+ Â· Â· +(ğ‘› âˆ’ ğ‘˜)ğ‘ ğ‘˜+âˆ‘ğ‘›âˆ’ğ‘˜ âˆ’1ğ‘–=1(ğ‘› âˆ’ ğ‘˜ âˆ’ ğ‘–)ğ‘ ğ‘˜ğ‘› + Â· Â· Â· + 1lscore(ğœ) = len(ğœ) mscore(ğœ) = max(ğœ)ã“ã“ã§ã€len(ğœ)ã¯ãƒªã‚¹ãƒˆ ğœ ã®é•·ã•ã€max(ğœ)ã¯ ğœ ãŒå«ã‚€å€¤ã®æœ€å¤§å€¤ã‚’æ±‚ã‚ã‚‹é–¢æ•°ã§ã‚ã‚‹ã€‚
wscore(ğœ)ã¯ã€é‡ã¿ä»˜ãè©•ä¾¡ã‚¹ã‚³ã‚¢ã§ã€ã©ã‚Œã ã‘æ—©ã„ã‚¿ãƒ¼ãƒ³ã§é«˜ã„è©•ä¾¡ã‚¹ã‚³ã‚¢ã®å›ç­”ã‚’å‡ºã›ã‚‹ã‹ã‚’è¡¨ã™ã€‚
ä¾‹ãˆã° ğ‘› = 3 ã®ã¨ãã€ğœâ€²= [1, 5]ã«å¯¾ã—ã¦wscore(ğœâ€²) =3âˆ—1+2âˆ—5+1âˆ—53+2+1= 3 ã§ã‚ã‚‹ã€‚
lscore(ğœ)ã¯ã€å¯¾è©±ãŒçµ‚äº†ã™ã‚‹ã¾ã§ã®ã‚¿ãƒ¼ãƒ³æ•°ã§ã‚ã‚Šä½ã„ã»ã©ã‚ˆã„ã€‚
mscore(ğœ)ã¯ã€é€£ç¶šå¯¾è©±ã§å¾—ã‚‰ã‚ŒãŸæœ€è‰¯ã®å›ç­”ã®è©•ä¾¡ã‚¹ã‚³ã‚¢ã‚’è¡¨ã™ã€‚
å…¨ã¦ã®ã‚¹ã‚³ã‚¢ã®å€¤ã¯ 0 ä»¥ä¸Š ğ‘› ä»¥ä¸‹ã€‚
å°šã€lscore(ğœâ€²) = 2, mscore(ğœâ€²) = 5 ã§ã‚ã‚‹ã€‚
æœ€çµ‚çš„ã«ã€å„ã€…ã®æŒ‡æ¨™ã‚¹ã‚³ã‚¢ã®è©•ä¾¡ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§ã®å¹³å‡å€¤ç­‰ãŒé€£ç¶šå¿œç­”ã®æ€§èƒ½ã‚’è¡¨ã™æŒ‡æ¨™ã¨ãªã‚‹ã€‚



3.2 è©•ä¾¡å®Ÿé¨“ã¨è€ƒå¯Ÿ II

ææ¡ˆæ‰‹æ³•ã®å®ŸåŠ¹æ€§ã‚’è©•ä¾¡ã™ã‚‹ãŸã‚ã« QA ã‚’æ¨™æº–çš„ãªå½¢ã§ãƒãƒ«ãƒã‚¿ãƒ¼ãƒ³ã«å¯¾å¿œã•ã›ãŸ MQA ã‚’æº–å‚™ã—ãŸã€‚
MQA ã¯ã€è³ªå•ã¨ Q/A å±¥æ­´ã‹ã‚‰æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’ç”Ÿæˆã—ã€å›ç­”ç”Ÿæˆæ™‚ã« Q/A å±¥æ­´ã‚’åˆ©ç”¨ã™ã‚‹ã€‚
MQA ã®é€£ç¶šå¿œç­”æ€§èƒ½ã¯ QA ã‚ˆã‚Šé«˜ã„ã¨æƒ³å®šã§ãã‚‹ã€‚
IBM Z é–¢é€£ã® 10 å€‹ã®è£½å“ã«é–¢ã™ã‚‹ 432 å€‹ã®è³ªå•/æ­£ç­”ä¾‹(å…¨ã¦è‹±èª)ã‚’æº–å‚™ã—ã€QA, MQA ã®é€£ç¶šå¿œç­”æ€§èƒ½ã‚’ææ¡ˆæ‰‹æ³•(æœ€å¤§ã‚¿ãƒ¼ãƒ³æ•° 5)ã‚’ç”¨ã„ã¦è¨ˆæ¸¬ã—ãŸã€‚
çµæœã‚’å›³ 4 ã«ç¤ºã™ã€‚
å„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å‡ºåŠ›ã‚’è¦‹ã‚‹ã¨ã€å›ç­”åˆ¤å®šã«ã‚ˆã‚‹ãƒ¬ãƒ“ãƒ¥ãƒ¼æ–‡ã«åŸºã¥ã„ã¦ã€è³ªå•ç”Ÿæˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒã€æ–°ãŸãªç´°ã‹ã„è³ªå•ï¼é–“é•ã„éƒ¨åˆ†ã‚’ç¢ºèªã™ã‚‹è³ªå•ã‚’ç”Ÿæˆã—ã€Q/A ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰è¿½åŠ wscore(â†‘): 3.535207lscore(â†“): 3.147541mscore(â†‘): 4.185012QA: å„ã‚¹ã‚³ã‚¢ã®å¹³å‡wscore(â†‘): 3.606557lscore(â†“): 3.049180mscore(â†‘): 4.266979MQA: å„ã‚¹ã‚³ã‚¢ã®å¹³å‡å›³ 4 é€£ç¶šå¿œç­”æ€§èƒ½ã«é–¢ã™ã‚‹è©•ä¾¡å®Ÿé¨“ã®çµæœ( â†‘ / â†“ ã¯ã€å€¤ãŒé«˜ã„ / ä½ã„æ–¹ãŒé€£ç¶šå¿œç­”æ€§èƒ½ãŒé«˜ã„ã“ã¨ã‚’ç¤ºã™ã€‚
)æƒ…å ±ã‚’å¾—ã¦ã€ç²å›ç­”æ§‹æˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒæœ€çµ‚çš„ã«æ­£ç­”ä¾‹ã«ç›¸å½“ã™ã‚‹å›ç­”ã‚’æ§‹æˆã™ã‚‹ã¨ã„ã£ãŸä¼šè©±ãŒé »ç¹ã«è¦‹å—ã‘ã‚‰ã‚ŒãŸã€‚
ä¼šè©±ã®å®Ÿä¾‹ã‚’ä»˜éŒ²ã®å›³ 8 ã«ç¤ºã™ã€‚
å›³ 4 ã«ã‚ˆã‚‹ã¨ã€wscore ã¨ mscore ã®å¹³å‡å€¤ã¯ MQAã®æ–¹ãŒ QA ã‚ˆã‚Šé«˜ãã€lscore ã®å¹³å‡å€¤ã¯ MQA ã®æ–¹ãŒä½ã„ã€‚
ã¾ãŸã€ã“ã®å‚¾å‘ã¯ã€è£½å“ã”ã¨ã® 10 å€‹ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆå„ã€…ã§ã®è¨ˆæ¸¬ã«ãŠã„ã¦ã‚‚ã€ä¸€è²«ã—ã¦æˆç«‹ã—ã¦ã„ãŸã€‚
ä»˜éŒ²ã®å›³ 9 ã«ã“ã‚Œã‚‰ã®è¨ˆæ¸¬å€¤ã‚’ç¤ºã™ã€‚
ã“ã®å®Ÿé¨“çµæœã¯ã€MQA ãŒ QA ã‚ˆã‚Šã‚‚ã€å¹³å‡çš„ã«ã€ã‚ˆã‚Šæ—©ãã‚ˆã‚Šæ­£ç¢ºãªå›ç­”ã‚’ç”Ÿæˆã—ã€æœ€çµ‚çš„ã«ã‚ˆã‚ŠçŸ­ã„å¯¾è©±æ•°ã§ã‚ˆã‚Šæ­£ç¢ºãªå›ç­”ã‚’ç”Ÿæˆã—ãŸã“ã¨ã‚’ç¤ºã—ã¦ã„ã‚‹ã€‚
ã“ã®ã“ã¨ã¯ã€ææ¡ˆæ‰‹æ³•ãŒã€å¿œç­”ã®æ­£ç¢ºæ€§ã«é–¢ã™ã‚‹é€£ç¶šå¿œç­”æ€§èƒ½ã®å·®ã‚’æ¤œå‡ºå¯èƒ½ã§ã‚ã‚‹ã“ã¨ã‚’ç¤ºã—ã¦ãŠã‚Šã€æœ¬æ‰‹æ³•ãŒä¸€å®šç¨‹åº¦ã€å®ŸåŠ¹çš„ã§ã‚ã‚‹ã“ã¨ã‚’ç¤ºå”†ã—ã¦ã„ã‚‹ã¨è€ƒãˆã‚‰ã‚Œã‚‹ã€‚


4 ã¾ã¨ã‚

RAG ã«ã‚ˆã‚‹å¿œç­”ã®æ­£ç¢ºæ€§ã‚’ã€Œè³ªå•ã¨æ­£ç­”ä¾‹ã«åŸºã¥ã„ã¦æ¤œç´¢ã•ã‚ŒãŸã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã€ã‚’ç”¨ã„ã¦è‡ªå‹•è©•ä¾¡ã™ã‚‹æ–¹æ³•ã€ãŠã‚ˆã³ã€é€£ç¶šå¿œç­”ã®æ€§èƒ½ã‚’ã€Œé€£ç¶šçš„ãªè³ªå•å¿œç­”ã§æ­£ç­”ä¾‹ã®æƒ…å ±ã‚’ã©ã®ç¨‹åº¦ã€ã©ã‚Œã ã‘æ—©ãå¼•ãå‡ºã›ã‚‹ã‹ã€ã¨ã„ã†è¦³ç‚¹ã‹ã‚‰è‡ªå‹•è©•ä¾¡ã™ã‚‹æ–¹æ³•ã‚’æ§‹ç¯‰ã—ãŸã€‚
ã¾ãŸã€äºˆå‚™çš„ãªå®Ÿé¨“ã«ã‚ˆã‚Šã€ãã®æœ‰åŠ¹æ€§ã¨å®ŸåŠ¹æ€§ã‚’ä¸€å®šç¨‹åº¦ç¢ºèªã—ãŸã€‚
ä»–ã®è©•ä¾¡æŒ‡æ¨™ï¼ˆRAGAsãªã©ï¼‰ã¨ã®æ¯”è¼ƒã‚„ã€é€£ç¶šå¿œç­”ã«ãŠã‘ã‚‹è©•ä¾¡è¦³ç‚¹ã®æ›´ãªã‚‹è€ƒå¯Ÿã€è©•ä¾¡æ‰‹æ³•ã®æ´—ç·´åŒ–ãŒä»Šå¾Œã®èª²é¡Œã§ã‚ã‚‹ã€‚
â€• 3566 â€•



å‚è€ƒæ–‡çŒ®


[1] Eric J. Breck, John D. Burger, Lisa Ferro, LynetteHirschman, David House, Marc Light, and Inderjeet Mani.How to evaluate your question answering system everyday ... and still get real work done. In M. Gavrili-dou, G. Carayannis, S. Markantonatou, S. Piperidis, andG. Stainhauer, editors, Proceedings of the Second In-ternational Conference on Language Resources andEvaluation (LRECâ€˜00), Athens, Greece, May 2000. Eu-ropean Language Resources Association (ELRA).
[2] Tianyi Zhang, Varsha Kishore, Felix Wu, Kilian Q. Wein-berger, and Yoav Artzi. BERTScore: Evaluating text gen-eration with BERT. In 8th International Conferenceon Learning Representations, ICLR 2020, AddisAbaba, Ethiopia, April 26-30, 2020. OpenReview.net,2020.
[3] Seungone Kim, Jamin Shin, Yejin Cho, Joel Jang, ShayneLongpre, Hwaran Lee, Sangdoo Yun, Seongjin Shin, Sung-dong Kim, James Thorne, and Minjoon Seo. Prometheus:Inducing ï¬ne-grained evaluation capability in languagemodels. In 12th International Conference on Learn-ing Representations, ICLR 2024, 2024.
[4] Seungone Kim, Juyoung Suk, Shayne Longpre,Bill Yuchen Lin, Jamin Shin, Sean Welleck, GrahamNeubig, Moontae Lee, Kyungjae Lee, and Minjoon Seo.Prometheus 2: An open source language model specializedin evaluating other language models. In Yaser Al-Onaizan,Mohit Bansal, and Yun-Nung Chen, editors, Proceedingsof the 2024 Conference on Empirical Methods inNatural Language Processing, pp. 4334â€“4353, Miami,Florida, USA, November 2024. Association for Computa-tional Linguistics.
[5] Shahul Es, Jithin James, Luis Espinosa Anke, and StevenSchockaert. RAGAs: Automated evaluation of retrievalaugmented generation. In Nikolaos Aletras and OrpheeDe Clercq, editors, Proceedings of the 18th Confer-ence of the European Chapter of the Associationfor Computational Linguistics: System Demonstra-tions, pp. 150â€“158, St. Julians, Malta, March 2024. Asso-ciation for Computational Linguistics.
[6] Lianmin Zheng, Wei-Lin Chiang, Ying Sheng, SiyuanZhuang, Zhanghao Wu, Yonghao Zhuang, Zi Lin, Zhuo-han Li, Dacheng Li, Eric P. Xing, Hao Zhang, Joseph E.Gonzalez, and Ion Stoica. Judging llm-as-a-judge withmt-bench and chatbot arena. In Proceedings of the37th International Conference on Neural Informa-tion Processing Systems, NIPS â€™23, Red Hook, NY,USA, 2024. Curran Associates Inc.
[7] Ge Bai, Jie Liu, Xingyuan Bu, Yancheng He, Jiaheng Liu,Zhanhui Zhou, Zhuoran Lin, Wenbo Su, Tiezheng Ge,Bo Zheng, and Wanli Ouyang. MT-bench-101: A ï¬ne-grained benchmark for evaluating large language models inmulti-turn dialogues. In Lun-Wei Ku, Andre Martins, andVivek Srikumar, editors, Proceedings of the 62nd An-nual Meeting of the Association for ComputationalLinguistics (Volume 1: Long Papers), pp. 7421â€“7454,Bangkok, Thailand, August 2024. Association for Compu-tational Linguistics.
[8] Ragas : List of available metrics, Accessed on 01/04,2025. https://docs.ragas.io/en/stable/concepts/metrics/available_metrics/.
[9] IBM. IBM Z, Accessed on 01/04, 2025. https://www.ibm.com/jp-ja/z.
[10] IBM. watsonx Assistant for Z, Accessed on01/04, 2025. https://www.ibm.com/jp-ja/products/watsonx-assistant-for-z.
[11] Seungone Kim, Jamin Shin, Yejin Cho, Joel Jang,Shayne Longpre, Hwaran Lee, Sangdoo Yun, SeongjinShin, Sungdong Kim, James Thorne, and Min-joon Seo. prometheus-eval/prometheus-8x7b-v2.0, Ac-cessed on 12/30, 2024. https://huggingface.co/prometheus-eval/prometheus-8x7b-v2.0.
[12] Mistral AI. mistralai/mixtral-8x7b-instruct-v0.1, Accessedon 12/30, 2024. https://huggingface.co/mistralai/Mixtral-8x7B-Instruct-v0.1.
[13] Meta. meta-llama/llama-3.1-70b-instruct, Accessed on12/30, 2024. https://huggingface.co/meta-llama/Llama-3.1-70B-Instruct.â€• 3567 â€•

Aî˜î˜ä»˜éŒ²###Task Description:An instruction, a question, context documents, a response to evaluate, a reference answer that gets a score of 5, and a score rubric representing a evaluation criteria are given.1. Write a detailed feedback that assess the quality of the response strictly based on the given score rubric, not evaluating in general.2. After writing a feedback, write a score that is an integer between 0 and 5. You should refer to the score rubric.3. The output format should look as follows: "Feedback: (write a feedback for criteria) [RESULT](an integer number between 0 and 5)"4. Please do not generate any
other opening, closing, and explanations.###The instruction to evaluate:Evaluate the below given response based on the contexts and the reference answer. The evaluation should be based strongly on the fact that the reference answer is a correct answer to the question. So make sure if the response implies the reference answer, the response is also correct.###Contexts:Â¥n {$CONTEXTS}###Question:Â¥n {$QUESTION}###Response to evaluate: Â¥n {$TARGET_ANSWER}###Reference Answer (Score 5): Â¥n {$REFERENCE_ANSWER}###Score Rubrics:[If the context contains the correct information and the reference answer is completely correct, what is score of the response based on the following criteria?]Score 0: The response states it is not sure.Score 1:
The response is completely wrong, and fatal .Score 2: The response is mostly wrong, but not very fatal.Score 3: The response is partially correct and partially wrong.Score 4: The answer is largely correct, but incomplete.Score 5: The response is correct and complete. ###Feedback: å›³ 5 ç”Ÿæˆå›ç­”ã®è©•ä¾¡ LLM ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®æ¦‚è¦### System promptYou are trying to ask a series of questions to the Question and Answer System (QA), which uses the entire session history for generating answers, and get an answer that the Evaluation System (EVAL) would judge the answer as a complete correct answer (of score 5) for the following target question:
â€ {$ORG_QUESTION} ".### User prompt (for task 3)The below is a history of questions and answers between you and QA:Â¥n {$QA_HISTORY}Generate a correct and complete answer to the target question by selecting and summarizing information in the history of Q/A session. Note that the responses from the QA are not necessarily correct, but only information contained in, or that can be inferred from, the answers from QA must be used.Please be sure to use the following format in your response:Answer: <answer>, Explanation: <explanation>### User prompt (for task 7)The following is a question and answer history between you and QA in
its current state. (Note that the responses from the QA are not necessarily correct.): {$QA_HISTORY}Based on this Q/A history, you have the tentative answer â€œ {$TGT_ANSWER} â€ to the target question.A reference answer (of score 5) for the target question is that â€ {$GOLD_ANSWER}".Revised the tentative answer to a complete and correct answer. The revised response may delete or rephrase information in the tentative response or add information inferred from previous responses from the QA, according to reference answer, but may not contain information described solely in the reference answer. Please be sure to use the following format in
your response:Answer: <revised-answer>,  Explanation: <explanation>.å›³ 6 å›ç­”æ§‹æˆ LLM ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®æ¦‚è¦### System promptYou are trying to ask a question to the Question and Answer System (QA), which uses the entire session history for generating answers, and get an answer that the Evaluation System (EVAL) would judge the answer as a complete correct answer (of score 5) for the following target question: â€ {$TGT_QUESTION}  â€### User promptThe following is a question and answer history between you and QA in its current state. (Note that the responses from the QA are not necessarily correct.):{$QA_HISTORY}Based on this Q/A history, you have the tentative
answer â€œ{$TGT_ANSWER}â€ to the target question.EVAL's evaluation of this tentative answer is that â€{$Judgement_RESULT}  ".A reference answer (of score 5) for the target question is that â€ {$GOLD_ANSWER}  ".Complete the below tasks:1. Decide if additional queries are needed to the QA to obtain or confirm any unknown information for revising the tentative answer to ones that EVAL would judge to be the complete correct answer to the target question. Here, you must not use information contained only in the reference answer or evaluation from EVAL without first validating such information with QA.2. If additional queries are needed, generate
a query that should be made to QA to directly obtain or directly confirm information that is still missing or unknown in order for EVAL to judge to be the complete correct answer to the target question. The query must be different from previous questions and can include information contained in the EVAL evaluation results. (If no additional questions are needed, leave blank).Please be sure to use the following format in your response:Query: <query-statement>, Explanation: <explanation>.å›³ 7 è³ªå•ç”Ÿæˆç”¨ LLM ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®æ¦‚è¦è³ªå•:  What do SQL statements  UNION and UNION ALL do and what are  the difference between them ?
æ­£ç­”ä¾‹:  They are both used to combine the results of SELECT statements. UNION eliminates duplicates, UNION all does not.[Task1] MQAã®ç”Ÿæˆå›ç­”: SQL statements UNION and UNION ALL are used to combine the results of two or more SELECT statements into a single result table. The difference between them is that UNION will combine the results without eliminating duplicates, while UNION ALL will combine the results and eliminate duplicates. [Task3]å›ç­”åˆ¤å®šã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ: The response is partially correct, but incomplete. It
correctly states that UNION and UNION ALL are used to combine the results of SELECT statements, and that UNION ALL eliminates duplicates. However, it incorrectly states that UNION does not eliminate duplicates, when in fact, UNION eliminates duplicates.Score: 3[Task4, 5]è³ªå•ç”Ÿæˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ:  Query: Does UNION eliminate duplicates or not?, Explanation: The tentative answer is incomplete and incorrect according to EVAL's evaluation. It states that UNION does not eliminate duplicates, but EVAL says it does. To confirm this, a direct
question is needed to clarify the behavior of UNION regarding duplicates.[Task1] MQAã®ç”Ÿæˆå›ç­” : Yes, the SQL keyword UNION does eliminate duplicates. By itself, UNION returns all of the values from the result table of each SELECT statement, but if you specify UNION ALL, it will return all duplicate rows in the result table.[Task2]å›ç­”æ§‹æˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ : Answer: SQL statements UNION and UNION ALL are used to combine the results of two or more SELECT statements into a single result
table. The difference between them is that UNION eliminates duplicates, while UNION ALL does not eliminate duplicates and returns all rows, including duplicates.[[Task3]å›ç­”åˆ¤å®šã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ: The response is correct and complete. It accurately explains the difference between UNION and UNION ALL, stating that UNION eliminates duplicates while UNION ALL does not. The response is faithful to the reference answer and the context information. Score: 5ä¼šè©±ä¾‹:å®Ÿç·šéƒ¨åˆ†ã¯é–“é•ã„ã€ç ´ç·šéƒ¨ã§é–“é•ã„ã‚’æŒ‡æ‘˜ã€ç‚¹ç·šéƒ¨ã§é–“é•ã„ã‚’ç¢ºèªã™ã‚‹è³ªå•ã‚’ç”Ÿæˆå›³ 8 ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å‡ºåŠ›ä¾‹(ä¼šè©±ä¾‹)wscoreelscoreemscoreeå›³ 9 å„æŒ‡æ¨™ã‚¹ã‚³ã‚¢ wscore, lscore, mscore ã®å¹³å‡ã‚’è£½å“ã”ã¨ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ qai(ğ‘– = 0 . . . 9)ã«å¯¾ã—ã¦æ±‚ã‚ã¦ãƒ—ãƒ­ãƒƒãƒˆã—ãŸã‚°ãƒ©ãƒ•ã€‚
é’ç‚¹(ç‚¹ç·š)ãŒ QAã€é»„ç‚¹(å®Ÿç·š)ãŒ MQA ã‚’è©•ä¾¡å¯¾è±¡ã¨ã—ãŸéš›ã®æŒ‡æ¨™ã‚¹ã‚³ã‚¢ã®å¹³å‡ã‚’ç¤ºã™ã€‚
â€• 3568 â€•