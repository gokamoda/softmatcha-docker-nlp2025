ITERKEY: LLM ã‚’ç”¨ã„ãŸåå¾©çš„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ç”Ÿæˆã«ã‚ˆã‚‹æ¤œç´¢æ‹¡å¼µç”Ÿæˆã®æœ€é©åŒ–

æ— å’Œæ¨¹

1

ä¸Šå£å¤– è‹±å‰›

1

å¹¸ç”° æ…ä¹Ÿ

2

æ¸¡è¾º å¤ªéƒ

11

å¥ˆè‰¯å…ˆç«¯ç§‘å­¦æŠ€è¡“å¤§å­¦é™¢å¤§å­¦

2

TDSE æ ªå¼ä¼šç¤¾



{hayashi.kazuki.hl4, kamigaito.h, taro}@is.naist.jp



æ¦‚è¦

æœ¬è«–æ–‡ã§ã¯ã€LLM ã‚’æ´»ç”¨ã—ã€ç–æ¤œç´¢ã‚’ç”¨ã„ãŸæ¤œç´¢æ‹¡å¼µç”Ÿæˆï¼ˆRAGï¼‰ã‚’æœ€é©åŒ–ã™ã‚‹ã€åå¾©çš„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ç”Ÿæˆæ‰‹æ³• IterKey ã‚’ææ¡ˆã™ã‚‹ã€‚
IterKey ã¯ã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ç”Ÿæˆã€å›ç­”ç”Ÿæˆã€å›ç­”æ¤œè¨¼ã® 3 ã¤ã®æ§‹æˆã‹ã‚‰æˆã‚Šã€ã™ã¹ã¦ LLM ã«ã‚ˆã£ã¦å®Ÿè¡Œã—ã€RAG ã®å‡¦ç†å…¨ä½“ã®æœ€é©åŒ–ã‚’ç›®æŒ‡ã™ã€‚
ã“ã®æ‰‹æ³•ã«ã‚ˆã‚Šã€è³ªå•å¿œç­”ã‚¿ã‚¹ã‚¯ã«ãŠã„ã¦ã€æ¤œç´¢ãªã—ã®æ‰‹æ³•ã‚„ BM25 ã‚’ç”¨ã„ãŸRAG ã¨æ¯”è¼ƒã—ã¦ç²¾åº¦ãŒ 5 ï¼…ã‹ã‚‰ 20 ï¼…å‘ä¸Šã—ã€å¯†æ¤œç´¢ãƒ¢ãƒ‡ãƒ«ã‚’ç”¨ã„ãŸ RAG ã‚„å…ˆè¡Œç ”ç©¶ã¨åŒç­‰ã®æ€§èƒ½ã‚’é”æˆã—ãŸã€‚
IterKey ã¯ã€ä¾¡å€¤ã‚ã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ãªãŒã‚‰ã€è§£é‡ˆå¯èƒ½æ€§ã‚’ç¶­æŒã—ã€LLM ã«ã‚ˆã‚‹åå¾©çš„ãªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ´—ç·´ã¨è‡ªå·±æ¤œè¨¼ã‚’é€šã˜ã¦ RAG å…¨ä½“ã‚’æœ€é©åŒ–ã™ã‚‹å¯èƒ½æ€§ã‚’ç¤ºã™æ–°ãŸãªç–æ¤œç´¢æ‰‹æ³•ã§ã‚ã‚‹ã€‚


1 ã¯ã˜ã‚ã«

å¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ«ï¼ˆLLMï¼‰[1, 2]ã¯è‡ªç„¶è¨€èªå‡¦ç†ã‚¿ã‚¹ã‚¯ã«ãŠã„ã¦é«˜ã„æ€§èƒ½ã‚’ç™ºæ®ã™ã‚‹ä¸€æ–¹ã§ã€å¹»è¦šï¼ˆhallucinationsï¼‰ã€çŸ¥è­˜ã®é™³è…åŒ–ã€ãŠã‚ˆã³ãƒãƒ«ãƒãƒ›ãƒƒãƒ—æ¨è«–ãŒå¿…è¦ã¨ãªã‚‹è¤‡é›‘ãªã‚¯ã‚¨ãƒªã¸ã®å¯¾å¿œãŒé›£ã—ã„ã¨ã„ã†èª²é¡ŒãŒã‚ã‚‹[3, 4, 5]ã€‚
ç‰¹ã«ã€å¿…è¦ãªæƒ…å ±ãŒãƒ¢ãƒ‡ãƒ«å†…éƒ¨ã«ååˆ†ã«è¨˜æ†¶ã•ã‚Œã¦ã„ãªã„çŸ¥è­˜é›†ç´„å‹ã‚¿ã‚¹ã‚¯ã«ãŠã„ã¦ã€ã“ã‚Œã‚‰ã®å•é¡Œã¯é¡•è‘—ã§ã‚ã‚‹[6, 7]ã€‚
ã“ã†ã—ãŸèª²é¡Œã«å¯¾å¿œã™ã‚‹æ‰‹æ³•ã¨ã—ã¦ã€æ¤œç´¢æ‹¡å¼µç”Ÿæˆï¼ˆRAGï¼‰ãŒã‚ã‚‹ã€‚
RAG ã¯å¤–éƒ¨çŸ¥è­˜ã‚’çµ±åˆã™ã‚‹ã“ã¨ã§ã€ç”Ÿæˆã•ã‚Œã‚‹å¿œç­”ã®ç²¾åº¦ã‚„é–¢é€£æ€§ã‚’å‘ä¸Šã•ã›ã€è³ªå•å¿œç­”ã‚¿ã‚¹ã‚¯ã§é«˜ã„æœ‰åŠ¹æ€§ã‚’ç¤ºã—ã¦ã„ã‚‹[8, 9, 10, 11, 12]ã€‚
è¿‘å¹´ã€ã‚¯ã‚¨ãƒªæ‹¡å¼µã‚„æ¤œç´¢ãƒ¢ãƒ‡ãƒ«ã®æ”¹è‰¯ã¨ã„ã£ãŸè¦ç´ æŠ€è¡“ã®é€²å±•ã«ã‚ˆã‚Šã€RAGã®æ€§èƒ½ã¯ã•ã‚‰ã«å‘ä¸Šã—ã¦ã„ã‚‹ã€‚
ä¸€æ–¹ã§ã€RAG ã®åŠ¹æœã‚’æœ€å¤§åŒ–ã™ã‚‹ã«ã¯æ¤œç´¢ã¨ç”Ÿæˆã®ç›¸äº’ä½œç”¨ãŒé‡è¦ã ãŒã€ç¾çŠ¶ã§ã¯ã€å¤šãã®æ‰‹æ³•ãŒæ¤œç´¢ã¨ç”Ÿæˆã®ç›¸äº’ä½œç”¨ã‚’ååˆ†ã«è€ƒæ…®ã—ã¦ãŠã‚‰ãšã€å¿œç­”ã®ä¸€è²«æ€§ã‚„ä¸¡è€…ã®é€£æºã«èª²é¡ŒãŒæ®‹ã£ã¦ã„ã‚‹[13, 14, 15, 16, 17, 18, 19]ã€‚
æœ¬ç ”ç©¶ã§ã¯ IterKeyï¼ˆIterative Keyword Generationwith LLMsï¼‰ã‚’ææ¡ˆã™ã‚‹ã€‚
IterKey ã¯ã€LLM ã‚’æ´»ç”¨ã—ã¦ RAG ã®å‡¦ç†ã‚’æœ€é©åŒ–ã™ã‚‹æ–°ã—ã„æ‰‹æ³•ã§ã‚ã‚Šã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ç”Ÿæˆã€å›ç­”ç”Ÿæˆã€æ¤œè¨¼ã® 3 æ®µéšã‚’é€šã˜ã¦æ¤œç´¢ã¨ç”Ÿæˆã‚’æœ€é©åŒ–ã—é€£æºã‚’å¼·åŒ–ã™ã‚‹ã€‚
4 ã¤ã®è³ªå•å¿œç­”ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§å®Ÿé¨“ã‚’è¡Œã£ãŸçµæœã€IterKeyã¯æ¤œç´¢ãªã—ã®æ‰‹æ³•ã‚„ BM25 ã‚’ç”¨ã„ãŸ RAG ã¨æ¯”è¼ƒã—ã¦ç²¾åº¦ãŒ 5 ï¼…ã‹ã‚‰ 20 ï¼…å‘ä¸Šã—ã€å¯†æ¤œç´¢ãƒ¢ãƒ‡ãƒ«ã‚’ç”¨ã„ãŸ RAG ã‚„å…ˆè¡Œç ”ç©¶ã¨åŒç­‰ã®æ€§èƒ½ã‚’ç¤ºã—ãŸã€‚
ã“ã‚Œã«ã‚ˆã‚Šã€IterKey ãŒ RAG ã®æœ€é©åŒ–ã«åŠ¹æœçš„ã§ã‚ã‚Šã€LLM ãŒåå¾©çš„ãªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ´—ç·´ã¨è‡ªå·±æ¤œè¨¼ã‚’é€šã˜ã¦ RAG ã‚’æ”¹å–„ã§ãã‚‹å¯èƒ½æ€§ãŒç¤ºã•ã‚ŒãŸã€‚



2 ææ¡ˆæ‰‹æ³•

BM25 [20]ã®ã‚ˆã†ãªç–æ¤œç´¢ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯ã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®å‡ºç¾é »åº¦ã‚„é‡è¦åº¦ã«åŸºã¥ã„ã¦æ–‡æ›¸ã‚’ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã—ã€å¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’åŠ¹ç‡çš„ã«å‡¦ç†ã™ã‚‹ã€‚
ã“ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯ã€æ¤œç´¢çµæœã«å½±éŸ¿ã‚’ä¸ãˆãŸã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒæ˜ç¢ºã§ã€å¯è¦–æ€§ã¨è§£é‡ˆæ€§ã®ç‚¹ã§å„ªã‚Œã¦ã„ã‚‹ã€‚
ä¸€æ–¹ã§ã€ç–æ¤œç´¢ã¯ã‚¯ã‚¨ãƒªã®ç´°ã‹ãªãƒ‹ãƒ¥ã‚¢ãƒ³ã‚¹ã‚„æš—é»™çš„ãªæƒ…å ±ã‚’æ‰ãˆã‚‹ç²¾åº¦ãŒä½ãã€å¯†æ¤œç´¢æ‰‹æ³•ã¨æ¯”ã¹ã¦æ€§èƒ½é¢ã§ã®åˆ¶ç´„ãŒã‚ã‚‹[21, 22, 23]ã€‚
IterKey ã¯ã€LLM ã®æœ€æ–°æŠ€è¡“ã‚’æ´»ç”¨ã—ã€æ¤œç´¢ã¨ç”Ÿæˆã‚’çµ±åˆçš„ã«æœ€é©åŒ–ã™ã‚‹ã“ã¨ã§ã€RAG ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®ç²¾åº¦ã‚’å‘ä¸Šã•ã›ã‚‹æ‰‹æ³•ã§ã‚ã‚‹ã€‚
LLM ã®è‡ªå·±æ¤œè¨¼æ©Ÿèƒ½[24]ã‚’åˆ©ç”¨ã—ã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ç”Ÿæˆã€æ–‡æ›¸æ¤œç´¢ã€å›ç­”ç”Ÿæˆã€å›ç­”æ¤œè¨¼ã®æ‰‹é †ã‚’åå¾©çš„ã«æ”¹å–„ã™ã‚‹ã“ã¨ã§ã€ç–æ¤œç´¢ã®åˆ¶ç´„ã‚’å…‹æœã—ã€ã‚ˆã‚Šæ­£ç¢ºã§è§£é‡ˆå¯èƒ½ãªçµæœã‚’å®Ÿç¾ã™ã‚‹ã€‚
å„ã‚¹ãƒ†ãƒƒãƒ—ã®è¨­è¨ˆã®èƒŒæ™¯ã‚„å‹•æ©Ÿã«ã¤ã„ã¦ã¯ã€å›³1 ã«ç¤ºã—ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®è©³ç´°ã¯è¡¨ 1 ã«è¨˜è¼‰ã™ã‚‹ã€‚
Step 1: ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ç”Ÿæˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¯ã‚¨ãƒª ğ‘ ã«å¯¾ã—ã€LLM ã¯ã‚¯ã‚¨ãƒªã®å›ç­”ã«é–¢é€£ã™ã‚‹æ–‡æ›¸ã‚’æ¤œç´¢ã™ã‚‹ãŸã‚ã®é‡è¦ãªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰é›†åˆK0ã‚’ç”Ÿæˆã—ã€ç–æ¤œç´¢ã§æ‰ãˆã«ãã„æ„å›³ã‚„ãƒ‹ãƒ¥ã‚¢ãƒ³ã‚¹ã‚’è£œå®Œã™ã‚‹ã€‚
IterKeyæ±Ÿâ¼¾æ™‚ä»£ã«â½‡æœ¬ã§å”¯â¼€ã€â»„æ´‹ã¨ã®äº¤æ˜“ãŒè¨±ã•ã‚Œã¦ã„ãŸå ´æ‰€ã¯ï¼Ÿã¡ã‚‡ã£ã¨è€ƒãˆã¾ã™â€¦ï¼‘å›â½¬ã®æ€è€ƒâ€¦ï¼’å›â½¬ã®æ€è€ƒâ€¦å‡ºå³¶ã§ã™ï¼ï¼Œâ»‘å´ã«ã‚ã‚‹æ‰‡å½¢ã®â¼©ã•ãªâ¼ˆâ¼¯å³¶ã§ã™ï¼
ã‚ã‚ŠãŒã¨ã†ï¼â¾ã£ã¦ã¿ã¾ã™ï¼
ãƒ¦ãƒ¼ã‚¶ã®è³ªå•ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å¤–éƒ¨çŸ¥è­˜ãƒ¦ãƒ¼ã‚¶ã®è³ªå•+å›ç­”å›ç­”æ–°ã—ã„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å‰å›ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰FalseTrueæ±Ÿâ¼¾æ™‚ä»£ã€äº¤æ˜“ã€â½‡æœ¬ï¼Œâ»‘å´ï¼Œæ¸¯ï¼Œâ»„æ´‹æ±Ÿâ¼¾æ™‚ä»£ã€äº¤æ˜“ã€â½‡æœ¬ï¼Œâ»‘å´ï¼Œæ¸¯ï¼Œâ»„æ´‹â»‘å´æ¸¯ã§ã™ï¼â»‘å´æ¸¯ã§ã™ï¼
æ±Ÿâ¼¾æ™‚ä»£ã€è²¿æ˜“æ‹ ç‚¹ã€â»‘å´ï¼Œã‚ªãƒ©ãƒ³ãƒ€ã€â»„æ´‹å›³ 1 IterKey ãƒ—ãƒ­ã‚»ã‚¹ã®æ¦‚è¦ï¼šLLM ã‚’ç”¨ã„ãŸåå¾©çš„ãªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ç”Ÿæˆã€å›ç­”ç”Ÿæˆã€ãŠã‚ˆã³æ¤œè¨¼ã‚’è¡Œã†ãƒ—ãƒ­ã‚»ã‚¹ã€‚
æ­£ã—ã„å›ç­”ãŒå¾—ã‚‰ã‚Œã‚‹ã¾ã§ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¨å›ç­”ã‚’æ´—ç·´ã—ã€RAG ã®ç²¾åº¦ã‚’å‘ä¸Šã•ã›ã‚‹ã€‚
è¡¨ 1 IterKey ã§ä½¿ç”¨ã•ã‚Œã‚‹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¯ã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ç”Ÿæˆã¨å›ç­”æ¤œè¨¼ã®åå¾©çš„ãªæ”¹å–„ã«ç”¨ã„ã‚‰ã‚Œã‚‹ã€‚
Step PromptStep 1:InitialKeywordGenera-tionSystem: You are an assistant that generates keywords for informationretrieval.User: Generate a list of important keywords related to the query {ğ‘ }.Focus on keywords that are relevant and likely to appear in documentsfor BM25 search in the RAG framework.Output the keywords as: [â€keyword1â€, â€keyword2â€, â€keyword3â€,...].Separate each keyword with a comma and do not include any addi-tional text.Step 2:AnswerGenera-tion usingRAGSystem: You are an assistant that generates answers based on
re-trieved documents.User: Here is a question that you need to answer:Query: { q }Below are some documents that may contain information relevantto the question. Consider the information in these documents whilecombining it with your own knowledge to answer the question accu-rately.Documents: { ğ· }Provide a clear and concise answer. Do not include any additionaltext.Step 3:AnswerValida-tionSystem: You are an assistant that validates whether the providedanswer is correct.User: Is the following answer correct?
Query: { q }Answer: { ğ‘ }Respond â€™Trueâ€™ or â€™Falseâ€™. Do not provide any additional explanationor text.Step 4:KeywordRegener-ationSystem: You reï¬ne keywords to improve document retrieval forBM25 search in the RAG framework.User: Reï¬ne the keyword selection process to improve the accuracyof retrieving documents with the correct answer.Query: { q }Previous Keywords: { ğ¾ }Provide the reï¬ned list of keywords in this format: [â€keyword1â€,â€keyword2â€, ...].Separate each keyword with a comma and do not include any addi-tional text.Step 2: å›ç­”ç”Ÿæˆå…ƒã®ã‚¯ã‚¨ãƒª ğ‘ ã¯ã€ç”Ÿæˆã•ã‚ŒãŸã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰Kğ‘–ã‚’åŠ ãˆã¦æ‹¡å¼µã‚¯ã‚¨ãƒª ğ‘ +Kğ‘–ã‚’å½¢æˆã™ã‚‹ã€‚
ã“ã®æ‹¡å¼µã‚¯ã‚¨ãƒªã‚’ä½¿ç”¨ã—ã¦ã€BM25ãƒ™ãƒ¼ã‚¹ã®æ¤œç´¢ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰ä¸Šä½ ğ‘˜ ä»¶ã®æ–‡æ›¸é›†åˆDğ‘–= {ğ‘‘1, ğ‘‘2, . . . , ğ‘‘ğ‘˜} ã‚’å–å¾—ã™ã‚‹ã€‚
å–å¾—ã—ãŸæ–‡æ›¸ã‚’åŸºã«ï¼ŒLLM ã¯å›ç­” ğ‘ğ‘–ã‚’ç”Ÿæˆã™ã‚‹ã€‚
Step 3: å›ç­”æ¤œè¨¼ LLM ã¯ç”Ÿæˆã•ã‚ŒãŸå›ç­”ã®æ­£èª¤ã‚’æ¤œè¨¼ã—ã€RAG ãŒæ­£ç¢ºã«å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã™ã‚‹ï¼LLM ã¯ã€ŒTrueã€ã¾ãŸã¯ã€ŒFalseã€ã§å¿œç­”ã—ã€ã€ŒTrueã€ã®å ´åˆã¯å›ç­” ğ‘ğ‘–ãŒæœ€çµ‚çµæœã¨ã—ã¦è¿”ã•ã‚Œã€å‡¦ç†ã¯çµ‚äº†ã™ã‚‹ã€‚
ã€ŒFalseã€ã®å ´åˆã¯ã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ç”Ÿæˆã¨æ¤œç´¢ã‚¹ãƒ†ãƒƒãƒ—ãŒå†èª¿æ•´ã™ã‚‹ã€‚
ã“ã®äºŒå€¤å¿œç­”ã«ã‚ˆã‚Šã€æ‰‹é †ã®æ˜ç¢ºåŒ–ã¨åå¾©å‡¦ç†ã®è‡ªå‹•åŒ–ãŒå®Ÿç¾ã•ã‚Œã‚‹ã€‚
Step 4: ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å†ç”Ÿæˆå›ç­”æ¤œè¨¼ã§ã€ŒFalseã€ã¨åˆ¤å®šã•ã‚ŒãŸå ´åˆã€LLM ã¯æ–°ãŸãªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰é›†åˆKğ‘–+1ã‚’ç”Ÿæˆã—ã€ æ¤œç´¢ç²¾åº¦ã‚’å‘ä¸Šã•ã›ã‚‹ãŸã‚ã®å†æ¤œç´¢ã‚’è¡Œã†ã€‚
ã“ã®éš›ã€ å…ƒã®ã‚¯ã‚¨ãƒª ğ‘ ã¨å‰å›ç”Ÿæˆã•ã‚ŒãŸã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰Kğ‘–ãŒå…¥åŠ›ã¨ã—ã¦åˆ©ç”¨ã™ã‚‹ã€‚
ç”Ÿæˆã•ã‚ŒãŸã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰Kğ‘–+1ã«åŸºã¥ãã€æ–°ãŸãªæ‹¡å¼µã‚¯ã‚¨ãƒªğ‘ +Kğ‘–+1ãŒå½¢æˆã•ã‚Œã€ã‚¹ãƒ†ãƒƒãƒ— 2 ã‹ã‚‰ 4 ãŒç¹°ã‚Šè¿”ã•ã‚Œã‚‹ã€‚
ã“ã®å‡¦ç†ã¯ã€ã€ŒTrueã€ãŒè¿”ã•ã‚Œã‚‹ã‹ã€æœ€å¤§åå¾©å›æ•° ğ‘ ã«é”ã™ã‚‹ã¾ã§ç¹°ã‚Šè¿”ã™ã€‚


3 å®Ÿé¨“è¨­å®š

æœ¬ç ”ç©¶ã§ã¯ã€æ¤œç´¢ãƒ¢ãƒ‡ãƒ«ã¨ã—ã¦ BM25 [20]ã‚’æ¡ç”¨ã—ï¼ŒBM25S [25]1ï¼‰ã‚’ç”¨ã„ã¦å®Ÿè£…ã—ãŸã€‚
ã¾ãŸã€å¯†æ¤œç´¢ãƒ¢ãƒ‡ãƒ«ã¨ã—ã¦ E5 [23]ã‚’å°å…¥ã—ã€ç–æ¤œç´¢ãƒ¢ãƒ‡ãƒ«ã¨åŒæ¡ä»¶ã§æ€§èƒ½ã‚’æ¯”è¼ƒã—ãŸã€‚
LLM ã¯ Llama-3.1-(8B, 70B)[26]ï¼ŒGemma-2 [27]ï¼ŒPhi-3.5-mini [2]ã® 4 ç¨®é¡ã‚’ä½¿ç”¨ã—ãŸã€‚
è©•ä¾¡ã¯ 4 ã¤ã®è³ªå•å¿œç­”ã‚¿ã‚¹ã‚¯ã§ IterKey ã‚’è©•ä¾¡ã—ãŸã€‚
ä½¿ç”¨ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¯ã€Natural Questions[28]ï¼ŒEntityQA [29]ï¼ŒWebQA [30]ã€ãŠã‚ˆã³ HotpotQA[31]ã§ã‚ã‚‹ã€‚
å…ˆè¡Œç ”ç©¶[32, 33, 16]ã«å¾“ã„ã€å„ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‹ã‚‰ 500 ä»¶ã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã—ã¦è©•ä¾¡ã‚’è¡Œã£ãŸã€‚
è©•ä¾¡ã¯ã‚¼ãƒ­ã‚·ãƒ§ãƒƒãƒˆç’°å¢ƒã§å®Ÿæ–½ã—ãŸã€‚
ç”Ÿæˆã•ã‚ŒãŸå›ç­”ã¯ Exact Match (EM)[34]ã§è©•ä¾¡ã—ãŸã€‚
1ï¼‰ https://github.com/xhluca/bm25sè¡¨ 2`RAG (BM25)Â´ãŠã‚ˆã³`RAG (E5)Â´ã¯ã€å…ƒã®ã‚¯ã‚¨ãƒªã«åŸºã¥ã BM25 ãŠã‚ˆã³ E5 ã‚’ä½¿ç”¨ã—ã¦ 1 å›ã®æ¤œç´¢ã‚’é©ç”¨ã™ã‚‹ã€‚
`ITRG (E5)Â´ã¯ï¼Œ5 å›ã®ã‚¯ã‚¨ãƒªæ‹¡å¼µã‚’ä¼´ã†ã€E5(æœ€é©ãªå¯†æ¤œç´¢æ‰‹æ³•)ã‚’ç”¨ã„ãŸæ‰‹æ³•ã§ã‚ã‚‹ã€‚
`IterKey (BM25)Â´ã¯ã€æœ€å¤§ 5 å›ã®æ¤œç´¢ã‚’è¡Œã£ã¦æœ€é©åŒ–ã™ã‚‹ã€‚
æœ¬è¡¨ã§ã¯ã€ä¸‹ç·šä»˜ãã®å€¤ã¯å„ãƒ¢ãƒ‡ãƒ«ã®ã‚¿ã‚¹ã‚¯ã”ã¨ã®æœ€è‰¯ã®æ€§èƒ½ã‚’ç¤ºã—ã€å¤ªå­—ã®å€¤ã¯ã™ã¹ã¦ã®æ‰‹æ³•ã®ä¸­ã§å„ã‚¿ã‚¹ã‚¯ã®æœ€é«˜ç²¾åº¦ã‚’ç¤ºã™ã€‚
Method Model Entity Hotpot Natural WebVanilllaLlama-3.1 (8B) 33.6 31.2 40.6 53.4Llama-3.1 (70B) 45.2 41.4 46.0 54.0Gemma-2 10.6 11.6 9.2 20.8Phi-3.5-mini 24.6 25.4 25.8 44.0RAG (BM25)Llama-3.1 (8B) 54.0 47.0 44.8 51.4Llama-3.1 (70B) 54.6 46.2 43.4 47.4Gemma-2 47.9 39.6 33.2 41.6Phi-3.5-mini 48.2 42.2 32.6 40.2RAG (E5)Llama-3.1 (8B) 52.9 47.7 49.6 48.2Llama-3.1 (70B) 57.0 51.0 49.4 48.8Gemma-2 52.2 40.8 41.5 41.8Phi-3.5-mini 50.2 44.6 37.0 41.4ITRG (E5)Llama-3.1 (8B) 60.6 53.4 53.6 56.2Llama-3.1 (70B) 60.7 52.9 53.3 51.6Gemma-2 54.2 47.6 47.4 48.5Phi-3.5-mini 54.3 47.1 36.2 44.6IterKey (BM25)Llama-3.1 (8B) 61.0 52.3 51.6 52.2Llama-3.1 (70B) 62.1 54.5 54.7 56.0Gemma-2 34.2 24.6 33.7 33.8Phi-3.5-mini 49.6 43.9 34.8 41.4ã“ã‚Œã¯ã€æ­£è¦åŒ–å¾Œã®å›ç­”ãŒå‚ç…§è§£ç­”ã¨ä¸€è‡´ã™ã‚‹å ´åˆã«æ­£è§£ã¨è¦‹ãªã™æ‰‹æ³•ã§ã‚ã‚‹ã€‚
æ­£è¦åŒ–ã§ã¯ã€å¤§æ–‡å­—ã‚’å°æ–‡å­—ã«å¤‰æ›ã—ã€å† è©ã‚„å¥èª­ç‚¹ã®é™¤å»ã€ãŠã‚ˆã³ç©ºç™½ã®çµ±ä¸€ã‚’è¡Œã£ãŸã€‚
ã¾ãŸã€ã‚¯ã‚¨ãƒªæ‹¡å¼µã®ç²¾åº¦ã‚’è©•ä¾¡ã™ã‚‹ãŸã‚ã€å–å¾—ã—ãŸæ–‡æ›¸ã«æ­£è§£ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã—ã€ãƒªã‚³ãƒ¼ãƒ«ã‚’æ¸¬å®šã—æ¤œç´¢æ€§èƒ½ã‚’è©³ç´°ã«åˆ†æã—ãŸã€‚
ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§ã€2018 å¹´ 12 æœˆç‰ˆã®Wikipedia ãƒ€ãƒ³ãƒ—[12]ã‚’æ¤œç´¢ã‚³ãƒ¼ãƒ‘ã‚¹ã¨ã—ã¦ä½¿ç”¨ã—ãŸã€‚
ã“ã‚Œã«ã‚ˆã‚Šã€å…ˆè¡Œç ”ç©¶[16]ã®è¨­å®šã‚’å†ç¾ã—ãŸã€‚
ã¾ãŸã€æ¤œç´¢ã¨ç”Ÿæˆã‚’åå¾©çš„ã«è¡Œã†ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã¨ã—ã¦ã€å¯†æ¤œç´¢ãƒ¢ãƒ‡ãƒ«ã‚’ç”¨ã„ãŸåå¾©çš„ã‚¯ã‚¨ãƒªç²¾ç·»åŒ–ã‚’ç‰¹å¾´ã¨ã™ã‚‹ ITRG (IterativeRetrieval-Generation Synergy)[16]ã‚’é¸æŠã—ãŸã€‚
ã“ã®æ¯”è¼ƒã‚’é€šã˜ã¦ã€æœ¬ç ”ç©¶ã®æ–°è¦æ€§ã¨è²¢çŒ®ã‚’æ˜ç¢ºåŒ–ã—ãŸã€‚



4 çµæœ

è¡¨ 2 ã¯ã€IterKey ãŒã™ã¹ã¦ã®ãƒ¢ãƒ‡ãƒ«ã§ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã‚’ä¸€è²«ã—ã¦ä¸Šå›ã‚Šã€10%ã‹ã‚‰ 20%ã®ç²¾åº¦å‘ä¸Šã‚’é”æˆã—ãŸã€‚
ç‰¹ã«ã€Llama-3.1 ã® 8B ãŠã‚ˆã³ 70B ãƒ¢ãƒ‡ãƒ«ã§ã¯é¡•è‘—ãªæ”¹å–„ãŒè¦‹ã‚‰ã‚Œã€8B ãƒ¢ãƒ‡ãƒ«ã¯ 70B ãƒ¢ãƒ‡ãƒ«ã¨åŒç­‰ã®ç²¾åº¦ã‚’ç¤ºã—ãŸã€‚
ã¾ãŸã€BM25 ãƒ™ãƒ¼ã‚¹ã® RAG ã¨æ¯”è¼ƒã—ã¦ã‚‚ã€Llama-3.1 ãƒ¢ãƒ‡ãƒ«ã§ã¯ IterKey ã®é©ç”¨ã«ã‚ˆã‚Š 5%ã‹ã‚‰ 10%ã®ç²¾åº¦å‘ä¸ŠãŒç¢ºèªã•ã‚ŒãŸã€‚
ã•ã‚‰ã«ï¼ŒLlama-3.1 ãƒ¢ãƒ‡ãƒ«ã§ã¯ E5 ãƒ™ãƒ¼ã‚¹ã® RAG ã‚’ä¸Šå›ã‚Šï¼Œ70B ãƒ¢ãƒ‡ãƒ«ã¯ 3 ã¤ã®ã‚¿ã‚¹ã‚¯ã§æœ€é«˜ç²¾åº¦ã‚’é”æˆã—ãŸã€‚
å¯†æ¤œç´¢ãƒªãƒˆãƒªãƒ¼ãƒãƒ¼ã‚’ç”¨ã„ãŸåå¾©ç²¾ç·»åŒ–æ‰‹æ³•ã§ã‚ã‚‹ ITRG ã¨ã‚‚åŒç­‰ä»¥ä¸Šã®æ€§èƒ½ã‚’ç¤ºã—ãŸã€‚
ä¸€æ–¹ã§ã€IterKey ã®æœ‰åŠ¹æ€§ã¯ãƒ¢ãƒ‡ãƒ«ã«ã‚ˆã£ã¦ç•°ãªã‚Šã€ITRG ãŒGemma-2 ãŠã‚ˆã³ Phi-3.5-mini ã§ç²¾åº¦ã‚’å®‰å®šã—ã¦å‘ä¸Šã•ã›ãŸã®ã«å¯¾ã—ã€IterKey ã§ã¯ç²¾åº¦å‘ä¸ŠãŒè¦‹ã‚‰ã‚Œãšã€E5 ãƒ™ãƒ¼ã‚¹ã® RAG ã‚’ä¸‹å›ã£ãŸã€‚
ã“ã‚Œã‚‰ã®çµæœã‹ã‚‰ã€IterKey ã¯å¤šãã®ãƒ¢ãƒ‡ãƒ«ã§åŠ¹æœã‚’ç™ºæ®ã™ã‚‹ãŒã€åå¾©çš„ãªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ç”ŸæˆãŠã‚ˆã³è‡ªå·±æ¤œè¨¼ã®åŠ¹æœã¯ãƒ¢ãƒ‡ãƒ«ã®æ€§èƒ½ã«ä¾å­˜ã™ã‚‹ã“ã¨ãŒæ˜ã‚‰ã‹ã¨ãªã£ãŸã€‚



5 åˆ†æ

IterKey ã«ãŠã‘ã‚‹ãƒªã‚³ãƒ¼ãƒ«ç‡ãŠã‚ˆã³ QA æ€§èƒ½å›³ 2ã¯ï¼ŒEntity QA ã‚¿ã‚¹ã‚¯ã«ãŠã‘ã‚‹ 3 æ‰‹æ³•ã¨ 4 ãƒ¢ãƒ‡ãƒ«ã®ãƒªã‚³ãƒ¼ãƒ«ç‡ï¼ˆ%ï¼‰ã‚’ï¼Œ5 å›ã®åå¾©å¹³å‡ã§ç¤ºã—ã¦ã„ã‚‹ã€‚
æ¯”è¼ƒã®ãŸã‚ã€BM25 ãŠã‚ˆã³ E5ï¼ˆæœ€å·¦åˆ—ï¼‰ã¯å…ƒã®ã‚¯ã‚¨ãƒªã‚’ç”¨ã„ãŸå˜ä¸€ã®æ¤œç´¢ã«ã‚ˆã‚‹ãƒªã‚³ãƒ¼ãƒ«ç‡ã‚’ç¤ºã™ã€‚
ãƒªã‚³ãƒ¼ãƒ«ç‡ã¯ã€å–å¾—æ–‡æ›¸ã«æ­£è§£ãŒå«ã¾ã‚Œã‚‹å‰²åˆã‚’è¡¨ã™ï¼IterKeyï¼ˆBM25ï¼‰ã¯ï¼ŒBM25 ã¨æ¯”è¼ƒã—ã¦ãƒªã‚³ãƒ¼ãƒ«ç‡ãŒç´„ 20%å‘ä¸Šã—ã€Llama-3.1 ãƒ¢ãƒ‡ãƒ«ã§ã¯ E5 ã¨æ¯”è¼ƒã—ã¦ãƒˆãƒƒãƒ— 5 ã®ãƒªã‚³ãƒ¼ãƒ«ç‡ãŒç´„ 10%å‘ä¸Šã—ãŸã€‚
ä¸€æ–¹ï¼ŒGemma ãŠã‚ˆã³ Phi ã¯ BM25 ã‚’ä¸Šå›ã‚‹ãŒã€ãƒªã‚³ãƒ¼ãƒ«ç‡ã¯ E5 ã«åŠã°ãªã„ã€‚
ã“ã‚Œã¯ã€åŠ¹æœçš„ãªæ¤œç´¢ç”¨ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®ç”ŸæˆãŒãƒ¢ãƒ‡ãƒ«ã®æ€§èƒ½ã«ä¾å­˜ã™ã‚‹ã“ã¨ã‚’ç¤ºå”†ã—ã¦ã„ã‚‹ã€‚
Gemma ãŠã‚ˆã³ Phi ã¯ãƒˆãƒƒãƒ— 3 ã§ç´„ 60%ã®ãƒªã‚³ãƒ¼ãƒ«ç‡ã‚’é”æˆã—ã¦ã„ã‚‹ãŒã€è¡¨ 2 ã«ç¤ºã™ã‚ˆã†ã« QA ç²¾åº¦ã¯ 20ã€œ30%ä½ã„ã€‚
æ¤œè¨¼ã‚¹ãƒ†ãƒƒãƒ—ãŒå–å¾—å€™è£œã®æ­£èª¤ã‚’é©åˆ‡ã«åˆ¤å®šã§ããšã€å…¨ä½“ã®ç²¾åº¦ã‚’ä¸‹ã’ã¦ã„ã‚‹ã“ã¨ãŒåŸå› ã¨è€ƒãˆã‚‰ã‚Œã‚‹ã€‚
IterKeyï¼ˆBM25ï¼‰ã¨ IterKeyï¼ˆE5ï¼‰ã®æ¯”è¼ƒã§ã¯ã€ãƒˆãƒƒãƒ— 1 ã®ãƒªã‚³ãƒ¼ãƒ«ç‡ã¯åŒç­‰ã ãŒã€ãƒˆãƒƒãƒ— 5 ã§ IterKeyï¼ˆBM25ï¼‰ãŒç´„ 10%ä¸Šå›ã‚Šã€IterKey ãŒç–æ¤œç´¢ãƒ¢ãƒ‡ãƒ«ã«ç‰¹ã«é©ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¤ºã—ã¦ã„ã‚‹ã€‚
æœ€å¾Œã«ã€è¡¨ 2 ã«åŸºã¥ã IterKeyï¼ˆBM25ï¼‰ã¨ ITRGï¼ˆE5ï¼‰ã‚’æ¯”è¼ƒã™ã‚‹ã¨ã€ITRGï¼ˆE5ï¼‰ã¯ãƒªã‚³ãƒ¼ãƒ«ç‡ã§å„ªã‚Œã‚‹ãŒã€IterKeyï¼ˆBM25ï¼‰ã¯ Llama-70ãƒ¢ãƒ‡ãƒ«ã§ 3 ã‚¿ã‚¹ã‚¯ã«ãŠã„ã¦æœ€é«˜ã® QA ç²¾åº¦ã‚’é”æˆã—ãŸï¼ITRG ã¯ 5 å›ã®å›ºå®šåå¾©å¾Œã«æœ€çµ‚å›ç­”ã‚’å‡ºåŠ›ã™ã‚‹ãŒã€IterKeyï¼ˆBM25ï¼‰ã¯æ­£è§£ãŒè¦‹ã¤ã‹ã£ãŸæ™‚ç‚¹ã§æ¤œè¨¼ã‚¹ãƒ†ãƒƒãƒ—ã«ã‚ˆã‚Šæ—©æœŸçµ‚äº†ã™ã‚‹ã€‚
ã“ã®çµæœã¯ã€ç‰¹ã«ä¿¡é ¼æ€§ã®é«˜ã„å›ç­”æ¤œè¨¼ãŒå¯èƒ½ãªãƒ¢ãƒ‡ãƒ«ã§ã€æˆ‘ã€…ã®æ‰‹æ³•ã®æ¤œè¨¼ã®ã‚¹ãƒ†ãƒƒãƒ—ã®æœ‰åŠ¹æ€§ã‚’ç¤ºã—ã¦ã„ã‚‹ã€‚
31.6Percentage (%)Top-K Recall â€“ IterKey (BM25)Top-K Recall â€“ IterKey (E5)44.358.058.261.062.864.660.463.865.666.862.865.267.443.846.047.849.647.657.458.859.831.6Top-K Recall â€“ ITRG (E5)44.351.061.062.864.665.665.462.466.662.668.467.031.644.358.051.061.062.864.660.866.872.656.665.275.747.259.263.246.458.263.867.880.060.040.020.0Percentage (%)80.060.040.020.0Percentage (%)80.060.040.020.069.655.435.670.073.869.851.458.256.053.354.638.068.656.654.251.056.053.31234512 3 4512 3 4512 3 4512 3 4512 3 451234512 3 4512 3 4512 3 4512 3 4512 3 4571.670.072.671.270.275.673.472.269.474.673.272.269.458.258.056.053.31234512 3 4512 3 4512 3 4512 3 4512 3 45BM25 E5 Llama-3.1-8BLlama-3.1-70B Gemma-2-9B Phi-3.5-mini-3.8Bå›³ 2 Entity QA ã‚¿ã‚¹ã‚¯ã«ãŠã‘ã‚‹å„ãƒ¢ãƒ‡ãƒ«ã® Top-K æ¤œç´¢ãƒªã‚³ãƒ¼ãƒ«ç‡ã‚’ç¤ºã™ã€‚
â€˜BM25â€™ ã¨ â€˜E5â€™ ã¯å˜ä¸€ã®æ¤œç´¢ã‚¹ãƒ†ãƒƒãƒ—ã‚’ä½¿ç”¨ã™ã‚‹ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³æ‰‹æ³•ã§ã‚ã‚‹ã€‚
ææ¡ˆæ‰‹æ³• â€˜IterKey (BM25)â€™ ã¯ã€â€˜IterKey (E5)â€™ ãŠã‚ˆã³ â€˜ITRG (E5)â€™ ã¨æ¯”è¼ƒã•ã‚Œã‚‹ã€‚
ãƒªã‚³ãƒ¼ãƒ«ç‡ã¯ 5 å›ã®åå¾©ã®å¹³å‡ã§ç®—å‡ºã•ã‚Œã¦ã„ã‚‹ã€‚
è¡¨ 3 IterKey ã®ãƒ¢ãƒ‡ãƒ«ã”ã¨ã«ãŠã‘ã‚‹å¹³å‡åå¾©å›æ•°ã€‚
Model Size (B) Entity Hotpot Natural WebLlama-3.1 8B 1.27 1.38 1.35 1.36Llama-3.1 70B 1.15 1.20 1.23 1.10Gemma-2 9B 1.33 1.36 1.34 1.37Phi-3.5-mini 3.8B 1.38 1.32 1.28 1.29è¨ˆç®—ã‚³ã‚¹ãƒˆ IterKey ã¯ç²¾åº¦ã‚’å‘ä¸Šã•ã›ã‚‹ãŒã€è¿½åŠ ã®è¨ˆç®—ã‚¹ãƒ†ãƒƒãƒ—ã‚’å¿…è¦ã¨ã™ã‚‹ã€‚
è¡¨ 4 ã¯ã€Entity QAãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã«ãŠã‘ã‚‹ Llama-3.1-8B ã‚’ç”¨ã„ãŸå®Ÿè¡Œæ™‚é–“ã‚’æ¯”è¼ƒã—ãŸã‚‚ã®ã§ã‚ã‚‹ã€‚
å…¬å¹³ãªæ¯”è¼ƒã‚’è¡Œã†ãŸã‚ã€IterKey ãŠã‚ˆã³ ITRG ã®ä¸¡æ–¹ã§æ¤œç´¢ã«ã¯ E5 ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã€‚
IterKeyã¯ã‚¯ã‚¨ãƒªæ‹¡å¼µã¨å›ç­”æ¤œè¨¼ã®å‡¦ç†ãŒè¿½åŠ ã•ã‚Œã‚‹ã‚‚ã®ã®ã€ITRG ã¨æ¯”è¼ƒã—ã¦å®Ÿè¡Œæ™‚é–“ãŒ 400ç§’çŸ­ç¸®ã•ã‚ŒãŸã€‚
è¡¨ 3 ã¯ã€ã™ã¹ã¦ã® QA ã‚¿ã‚¹ã‚¯ãŠã‚ˆã³ãƒ¢ãƒ‡ãƒ«ã«ãŠã‘ã‚‹ IterKey ã®å¹³å‡åå¾©å›æ•°ã‚’ç¤ºã—ã¦ã„ã‚‹ã€‚
å¹³å‡åå¾©å›æ•°ã¯ 1.5 æœªæº€ã§ã‚ã‚Šã€å„åå¾©ã¯ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ç”Ÿæˆã€å›ç­”ç”Ÿæˆã€æ¤œè¨¼ã® 3 å›ã® LLM å‘¼ã³å‡ºã—ã§æ§‹æˆã•ã‚Œã‚‹ã€‚
Llama-3.1-70B ãªã©ã®å¤§è¦æ¨¡ãƒ¢ãƒ‡ãƒ«ã¯ã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ç”Ÿæˆã¨æ¤œè¨¼ã®è³ªãŒé«˜ã„ãŸã‚ã€åå¾©å›æ•°ãŒå°‘ãªãåæŸã™ã‚‹ãªã©ã€ã‚ˆã‚ŠåŠ¹ç‡çš„ã«å‹•ä½œã™ã‚‹ã€‚
ã“ã‚Œã‚‰ã®çµæœã‹ã‚‰ã€IterKey ã¯ç–æ¤œç´¢ãƒ¢ãƒ‡ãƒ«ãƒ™ãƒ¼ã‚¹ã® RAG ã‚„ä»–ã®åå¾©çš„ã‚¯ã‚¨ãƒªç²¾ç·»åŒ–æ‰‹æ³•ã¨åŒç­‰ã®æ€§èƒ½ã‚’ç¶­æŒã—ã¤ã¤ã€é«˜ã„åŠ¹ç‡æ€§ã¨ç²¾åº¦ã‚’ä¸¡ç«‹ã—ã¦ã„ã‚‹ã“ã¨ãŒç¤ºã•ã‚Œã‚‹ã€‚
è¡¨ 4 Llama-3.1 (8B)ã‚’ä½¿ç”¨ã—ãŸ Entity QA ã®å®Ÿè¡Œæ™‚é–“ï¼ˆç§’ï¼‰ã€‚
æ¨è«–ã¯ NVIDIA RTX 6000 Ada GPUï¼ŒBM25 æ¤œç´¢ã¯Intel Xeon Platinum 8160 CPU ã§å®Ÿè¡Œã—ãŸã€‚
å…¬å¹³ãªæ¯”è¼ƒã®ãŸã‚ï¼ŒIterKey ã¨ ITRG ã®æ¤œç´¢ã«ã¯ E5 ã‚’ä½¿ç”¨ã—ãŸã€‚
Step RAG(BM25) RAG(E5) ITRG IterKeyQuery Expansion â€“ â€“ â€“ 663.8Retrieval 222.4 52.7 437.5 167.3Answer Generation 317.7 314.6 1694.3 523.5Answer Validation â€“ â€“ â€“ 360.8All 540.1 367.3 2131.8 1713.8

6 ãŠã‚ã‚Šã«

æœ¬ç ”ç©¶ã§ã¯ã€å¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ«ï¼ˆLLMï¼‰ã‚’æ´»ç”¨ã—ã¦ RAG ã®å‡¦ç†å…¨ä½“ã‚’æœ€é©åŒ–ã™ã‚‹åå¾©çš„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ç”Ÿæˆæ‰‹æ³• IterKey ã‚’ææ¡ˆã—ãŸã€‚
IterKey ã¯ã€LLM ã«ã‚ˆã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ç”Ÿæˆã€å›ç­”ç”Ÿæˆã€ãŠã‚ˆã³æ¤œè¨¼ã‚’è¡Œã†ã“ã¨ã§ã€æ¤œç´¢ã¨ç”Ÿæˆã®é€£æºã‚’å¼·åŒ–ã—ã€ã‚ˆã‚Šæ­£ç¢ºãªå¿œç­”ã‚’å®Ÿç¾ã™ã‚‹ã€‚
4 ã¤ã®è³ªå•å¿œç­”ã‚¿ã‚¹ã‚¯ã‚’ç”¨ã„ãŸå®Ÿé¨“ã§ã¯ã€IterKey ãŒ BM25 ã‚’ç”¨ã„ãŸ RAG ã¨æ¯”è¼ƒã—ã¦ 5%ã‹ã‚‰ 20%ã®ç²¾åº¦å‘ä¸Šã‚’é”æˆã—ã€å¯†æ¤œç´¢ã‚’ç”¨ã„ãŸ RAG ã‚„æ—¢å­˜ã®åå¾©çš„ã‚¯ã‚¨ãƒªç²¾ç·»åŒ–æ‰‹æ³•ã¨åŒç­‰ã®æ€§èƒ½ã‚’ç¤ºã—ãŸã€‚
ã“ã‚Œã‚‰ã®çµæœã¯ã€LLM ãŒåå¾©çš„ãªæ´—ç·´ã¨æ¤œè¨¼ã‚’é€šã˜ã¦ã€æ¤œç´¢ã¨ç”Ÿæˆã®çµã³ä»˜ãã‚’å¼·åŒ–ã—ï¼ŒRAG ã®å‡¦ç†ã‚’æœ€é©åŒ–ã§ãã‚‹å¯èƒ½æ€§ã‚’ç¤ºã—ãŸã€‚



å‚è€ƒæ–‡çŒ®


[1] OpenAI. Gpt-4 technical report. ArXiv, Vol. abs/2303.08774, , 2023.
[2] Marah Abdin, Jyoti Aneja, Hany Awadalla, Ahmed Awadallah, Ammar Ah-mad Awan, Nguyen Bach, Amit Bahree, Arash Bakhtiari, Jianmin Bao, Harki-rat Behl, Alon Benhaim, Misha Bilenko, Johan Bjorck, SÂ´ebastien Bubeck,Martin Cai, Qin Cai, Vishrav Chaudhary, Dong Chen, Dongdong Chen,Weizhu Chen, Yen-Chun Chen, Yi-Ling Chen, Hao Cheng, Parul Chopra,Xiyang Dai, Matthew Dixon, Ronen Eldan, Victor Fragoso, Jianfeng Gao,Mei Gao, Min Gao, Amit Garg, Allie Del Giorno, Abhishek Goswami,Suriya Gunasekar, Emman Haider, Junheng Hao, Russell J. Hewett, Wenx-iang Hu, Jamie Huynh, Dan Iter, Sam Ade Jacobs, Mojan Javaheripi, XinJin, Nikos Karampatziakis, Piero Kauï¬€mann, Mahoud Khademi, DongwooKim, Young Jin Kim, Lev Kurilenko, James R. Lee, Yin Tat Lee, YuanzhiLi, Yunsheng Li, Chen Liang, Lars Liden, Xihui Lin, Zeqi Lin, Ce Liu,Liyuan Liu, Mengchen Liu, Weishung Liu, Xiaodong Liu, Chong Luo,Piyush Madan, Ali Mahmoudzadeh, David Majercak, Matt Mazzola, CaioCÂ´esar Teodoro Mendes, Arindam Mitra, Hardik Modi, Anh Nguyen, Bran-don Norick, Barun Patra, Daniel Perez-Becker, Thomas Portet, Reid Pryzant,Heyang Qin, Marko Radmilac, Liliang Ren, Gustavo de Rosa, Corby Rosset,Sambudha Roy, Olatunji Ruwase, Olli Saarikivi, Amin Saied, Adil Salim,Michael Santacroce, Shital Shah, Ning Shang, Hiteshi Sharma, Yelong Shen,Swadheen Shukla, Xia Song, Masahiro Tanaka, Andrea Tupini, PraneethaVaddamanu, Chunyu Wang, Guanhua Wang, Lijuan Wang, Shuohang Wang,Xin Wang, Yu Wang, Rachel Ward, Wen Wen, Philipp Witte, Haiping Wu,Xiaoxia Wu, Michael Wyatt, Bin Xiao, Can Xu, Jiahang Xu, Weijian Xu,Jilong Xue, Sonali Yadav, Fan Yang, Jianwei Yang, Yifan Yang, Ziyi Yang,Donghan Yu, Lu Yuan, Chenruidong Zhang, Cyril Zhang, Jianwen Zhang,Li Lyna Zhang, Yi Zhang, Yue Zhang, Yunan Zhang, and Xiren Zhou. Phi-3technical report: A highly capable language model locally on your phone,2024.
[3] Nikhil Kandpal, Haikang Deng, Adam Roberts, Eric Wallace, and ColinRaï¬€el. Large language models struggle to learn long-tail knowledge. In An-dreas Krause, Emma Brunskill, Kyunghyun Cho, Barbara Engelhardt, SivanSabato, and Jonathan Scarlett, editors, Proceedings of the 40th Interna-tional Conference on Machine Learning, Vol. 202 of Proceedings ofMachine Learning Research, pp. 15696â€“15707. PMLR, 23â€“29 Jul 2023.
[4] Yue Zhang, Yafu Li, Leyang Cui, Deng Cai, Lemao Liu, Tingchen Fu, XintingHuang, Enbo Zhao, Yu Zhang, Yulong Chen, Longyue Wang, Anh Tuan Luu,Wei Bi, Freda Shi, and Shuming Shi. Sirenâ€™s song in the ai ocean: A surveyon hallucination in large language models, 2023.
[5] Yunfan Gao, Yun Xiong, Xinyu Gao, Kangxiang Jia, Jinliu Pan, Yuxi Bi,Yi Dai, Jiawei Sun, Meng Wang, and Haofen Wang. Retrieval-augmentedgeneration for large language models: A sur vey, 2024.
[6] Kenton Lee, Ming-Wei Chang, and Kristina Toutanova. Latent retrieval forweakly supervised open domain question answering. In Anna Korhonen,David Traum, and LluÂ´Ä±s M`arquez, editors, Proceedings of the 57th An-nual Meeting of the Association for Computational Linguistics, pp.6086â€“6096, Florence, Italy, July 2019. Association for Computational Lin-guistics.
[7] Rowan Zellers, Yonatan Bisk, Roy Schwartz, and Yejin Choi. SWAG: Alarge-scale adversarial dataset for g rounded commonsense inference. In EllenRiloï¬€, David Chiang, Julia Hockenmaier, and Junâ€™ichi Tsujii, editors, Pro-ceedings of the 2018 Conference on Empirical Methods in NaturalLanguage Processing, pp. 93â€“104, Brussels, Belgium, October-November2018. Association for Computational Linguistics.
[8] Patrick Lewis, Ethan Perez, Aleksandra Piktus, Fabio Petroni, VladimirKarpukhin, Naman Goyal, Heinrich KÂ¨uttler, Mike Lewis, Wen-tau Yih, TimRocktÂ¨aschel, Sebastian Riedel, and Douwe Kiela. Retrieval-augmented gen-eration for knowledge-intensive nlp tasks. In Proceedings of the 34th In-ternational Conference on Neural Information Processing Systems,NIPS â€™20, Red Hook, NY, USA, 2020. Curran Associates Inc.
[9] Gautier Izacard and Edouard Grave. Leveraging passage retrieval with gen-erative models for open domain question answering. In Paola Merlo, JorgTiedemann, and Reut Tsarfaty, editors, Proceedings of the 16th Confer-ence of the European Chapter of the Association for ComputationalLinguistics: Main Volume, pp. 874â€“880, Online, April 2021. Associationfor Computational Linguistics.
[10] Kurt Shuster, Spencer Poï¬€, Moya Chen, Douwe Kiela, and Jason Weston.Retrieval augmentation reduces hallucination in conversation. In Marie-Francine Moens, Xuanjing Huang, Lucia Specia, and Scott Wen-tau Yih,editors, Findings of the Association for Computational Linguistics:EMNLP 2021, pp. 3784â€“3803, Punta Cana, Dominican Republic, Novem-ber 2021. Association for Computational Linguistics.
[11] Ori Ram, Yoav Levine, Itay Dalmedigos, Dor Muhlgay, Amnon Shashua,Kevin Leyton-Brown, and Yoav Shoham. In-context retrieval-augmentedlanguage models. Transactions of the Association for ComputationalLinguistics, Vol. 11, pp. 1316â€“1331, 2023.
[12] Gautier Izacard, Patrick Lewis, Maria Lomeli, Lucas Hosseini, Fabio Petroni,Timo Schick, Jane Dwivedi-Yu, Armand Joulin, Sebastian Riedel, andEdouard Grave. Atlas: few-shot learning with retrieval augmented languagemodels. J. Mach. Learn. Res., Vol. 24, No. 1, March 2024.
[13] Zhengbao Jiang, Luyu Gao, Zhiruo Wang, Jun Araki, Haibo Ding, JamieCallan, and Graham Neubig. Retrieval as attention: End-to-end learning ofretrieval and reading within a single transformer. In Yoav Goldberg, ZornitsaKozareva, and Yue Zhang, editors, Proceedings of the 2022 Conferenceon Empirical Methods in Natural Language Processing, pp. 2336â€“2349, Abu Dhabi, United Arab Emirates, December 2022. Association forComputational Linguistics.
[14] Peitian Zhang, Shitao Xiao, Zheng Liu, Zhicheng Dou, and Jian-Yun Nie.Retrieve anything to augment large language models, 2023.
[15] Zhihong Shao, Yeyun Gong, Yelong Shen, Minlie Huang, Nan Duan, andWeizhu Chen. Enhancing retrieval-augmented large language models withiterative retrieval-generation synergy. In Houda Bouamor, Juan Pino, andKalika Bali, editors, Findings of the Association for ComputationalLinguistics: EMNLP 2023, pp. 9248â€“9274, Singapore, December 2023.Association for Computational Linguistics.
[16] Zhangyin Feng, Xiaocheng Feng, Dezhi Zhao, Maojin Yang, and Bing Qin.Retrieval-generation synergy augmented large language models. In ICASSP2024 - 2024 IEEE International Conference on Acoustics, Speechand Signal Processing (ICASSP), pp. 11661â€“11665, 2024.
[17] Wenhao Yu, Dan Iter, Shuohang Wang, Yichong Xu, Mingxuan Ju, SoumyaSanyal, Chenguang Zhu, Michael Zeng, and Meng Jiang. Generate ratherthan retrieve: Large language models are strong context generators. InThe Eleventh International Conference on Learning Representa-tions, 2023.
[18] Xin Cheng, Di Luo, Xiuying Chen, Lemao Liu, Dongyan Zhao, and Rui Yan.Lift yourself up: Retrieval-augmented text generation with self-memory. InThirty-seventh Conference on Neural Information Processing Sys-tems, 2023.
[19] Weijia Shi, Sewon Min, Michihiro Yasunaga, Minjoon Seo, Richard James,Mike Lewis, Luke Zettlemoyer, and Wen-tau Yih. REPLUG: Retrieval-augmented black-box language models. In Kevin Duh, Helena Gomez, andSteven Bethard, editors, Proceedings of the 2024 Conference of theNorth American Chapter of the Association for Computational Lin-guistics: Human Language Technologies (Volume 1: Long Papers),pp. 8371â€“8384, Mexico City, Mexico, June 2024. Association for Computa-tional Linguistics.
[20] Stephen Robertson and Hugo Zaragoza. The probabilistic relevance frame-work: Bm25 and beyond. Foundations and Trends in Information Re-trieval, Vol. 3, pp. 333â€“389, 01 2009.
[21] Gautier Izacard, Mathilde Caron, Lucas Hosseini, Sebastian Riedel, PiotrBojanowski, Armand Joulin, and Edouard Grave. Unsupervised dense infor-mation retrieval with contrastive learning, 2022.
[22] Jianlv Chen, Shitao Xiao, Peitian Zhang, Kun Luo, Defu Lian, and Zheng Liu.Bge m3-embedding: Multi-lingual, multi-functionality, multi-granularitytext embeddings through self-knowledge distillation, 2023.
[23] Liang Wang, Nan Yang, Xiaolong Huang, Binxing Jiao, Linjun Yang, DaxinJiang, Rangan Majumder, and Furu Wei. Text embeddings by weakly-supervised contrastive pre-training. arXiv preprint arXiv:2212.03533,2022.
[24] Peiyi Wang, Lei Li, Zhihong Shao, Runxin Xu, Damai Dai, Yifei Li, DeliChen, Yu Wu, and Zhifang Sui. Math-shepherd: Verify and reinforce LLMsstep-by-step without human annotations. In Lun-Wei Ku, Andre Martins,and Vivek Srikumar, editors, Pro ceedings of the 62nd Annual Meetingof the Association for Computational Linguistics (Volume 1: LongPapers), pp. 9426â€“9439, Bangkok, Thailand, August 2024. Association forComputational Linguistics.
[25] Xing Han L`u. Bm25s: Orders of magnitude faster lexical search via eagersparse scoring, 2024.
[26] Abhimanyu Dubey. The llama 3 herd of models, 2024.
[27] Gemma Team. Gemma: Open models based on gemini research and tech-nology, 2024.
[28] Tom Kwiatkowski, Jennimaria Palomaki, Olivia Redï¬eld, Michael Collins,Ankur Parikh, Chris Alberti, Danielle Epstein, Illia Polosukhin, Jacob Devlin,Kenton Lee, Kristina Toutanova, Llion Jones, Matthew Kelcey, Ming-WeiChang, Andrew M. Dai, Jakob Uszkoreit, Quoc Le, and Slav Petrov. Naturalquestions: A benchmark for question answering research. Transactions ofthe Association for Computational Linguistics, Vol. 7, pp. 452â€“466,2019.
[29] Xiaoya Li, Fan Yin, Zijun Sun, Xiayu Li, Arianna Yuan, Duo Chai, MingxinZhou, and Jiwei Li. Entity-relation extraction as multi-turn question an-swering. In Anna Korhonen, David Traum, and LluÂ´Ä±s M`arquez, editors,Proceedings of the 57th Annual Meeting of the Association forComputational Linguistics, pp. 1340â€“1350, Florence, Italy, July 2019.Association for Computational Linguistics.
[30] Yingshan Chang, Mridu Narang, Hisami Suzuki, Guihong Cao, JianfengGao, and Yonatan Bisk. Webqa: Multihop and multimodal qa. In Proceed-ings of the IEEE/CVF Conference on Computer Vision and PatternRecognition (CVPR), pp. 16495â€“16504, June 2022.
[31] Zhilin Yang, Peng Qi, Saizheng Zhang, Yoshua Bengio, William Cohen,Ruslan Salakhutdinov, and Christopher D. Manning. HotpotQA: A datasetfor diverse, explainable multi-hop question answering. In Ellen Riloï¬€, DavidChiang, Julia Hockenmaier, and Junâ€™ichi Tsujii, editors, Proceedings ofthe 2018 Conference on Empirical Methods in Natural LanguageProcessing, pp. 2369â€“2380, Brussels, Belgium, October-November 2018.Association for Computational Linguistics.
[32] Harsh Trivedi, Niranjan Balasubramanian, Tushar Khot, and Ashish Sabhar-wal. Interleaving retrieval with chain-of-thought reasoning for knowledge-intensive multi-step questions. In Anna Rogers, Jordan Boyd-Graber, andNaoaki Okazaki, editors, Proceedings of the 61st Annual Meeting ofthe Association for Computational Linguistics (Volume 1: LongPapers), pp. 10014â€“10037, Toronto, Canada, July 2023. Association forComputational Linguistics.
[33] Zhengbao Jiang, Frank Xu, Luyu Gao, Zhiqing Sun, Qian Liu, Jane Dwivedi-Yu, Yiming Yang, Jamie Callan, and Graham Neubig. Active retrieval aug-mented generation. In Houda Bouamor, Juan Pino, and Kalika Bali, editors,Proceedings of the 2023 Conference on Empirical Methods in Nat-ural Language Processing, pp. 7969â€“7992, Singapore, December 2023.Association for Computational Linguistics.
[34] Pranav Rajpurkar, Jian Zhang, Konstantin Lopyrev, and Percy Liang. SQuAD:100,000+ questions for machine comprehension of text. In Jian Su, KevinDuh, and Xavier Carreras, editors, Proceedings of the 2016 Confer-ence on Empirical Methods in Natural Language Processing, pp.2383â€“2392, Austin, Texas, November 2016. Association for ComputationalLinguistics.

è¡¨ 5 IterKey ã®æ€§èƒ½æ¯”è¼ƒï¼ˆBM25 ã¨å¯†æ¤œç´¢ãƒ¢ãƒ‡ãƒ« E5)ã€‚
Method Model Entity Hotpot Natural WebBM25Llama-3.1 (8B) 61.0 52.3 51.6 52.2Llama-3.1 (70B) 62.1 54.5 54.7 56.0Gemma-2 34.2 24.6 33.7 33.8Phi-3.5-mini 49.6 43.9 34.8 41.4E5Llama-3.1 (8B) -0.4 60.6 +1.4 53.7 -0.4 51.2 -2.1 50.1Llama-3.1 (70B) -0.2 61.9 -0.7 53.8 -1.1 53.6 -3.0 53.0Gemma-2 -1.1 33.1 -0.4 24.2 33.7 -2.9 30.9Phi-3.5 -2.2 47.4 +0.6 44.5 -0.9 33.9 -0.2 41.2

A



å®Ÿé¨“è¨­å®šã®è©³ç´°

æœ¬ç ”ç©¶ã§ã¯ã€è¤‡æ•°ã®ãƒ¢ãƒ‡ãƒ«é–“ã§æ€§èƒ½ã‚’å…¬å¹³ã«æ¯”è¼ƒã™ã‚‹ãŸã‚ã€ã™ã¹ã¦ã®å®Ÿé¨“ã‚’å˜ä¸€ã® NVIDIA RTX 6000Ada GPU ä¸Šã§å®Ÿæ–½ã—ã€ãƒ¢ãƒ‡ãƒ«ç”Ÿæˆã«ã¯åŠé‡å­åŒ–ã‚’åˆ©ç”¨ã—ãŸã€‚
ãŸã ã—ã€ãƒªã‚½ãƒ¼ã‚¹ã®åˆ¶ç´„ã«ã‚ˆã‚Šã€Llama-3.170B ãƒ¢ãƒ‡ãƒ«ã¯ 4-bit ãƒ¢ãƒ¼ãƒ‰ã§ãƒ­ãƒ¼ãƒ‰ãŠã‚ˆã³æ¨è«–ã‚’è¡Œã£ãŸã€‚
æœ¬ç ”ç©¶ã§ã¯ã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ç”Ÿæˆã€å›ç­”ç”Ÿæˆã€ãŠã‚ˆã³å›ç­”æ¤œè¨¼ã® 3 ã¤ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ LLM ã‚’ä½¿ç”¨ã™ã‚‹ã€‚
å„ã‚¹ãƒ†ãƒƒãƒ—ã§ã¯ã€è¡¨ 7 ã«ç¤ºã™ã‚ˆã†ã«ã€é©åˆ‡ãªæœ€å¤§ãƒˆãƒ¼ã‚¯ãƒ³é•·ãŒè¨­å®šã•ã‚ŒãŸã€‚
æ€§èƒ½æ¯”è¼ƒã®ãŸã‚ã€å„ãƒ¢ãƒ‡ãƒ«ã«åŒä¸€ã®è¨­å®šãŒé©ç”¨ã•ã‚ŒãŸã€‚
è¡¨ 6 å®Ÿé¨“ã§ä½¿ç”¨ã—ãŸè¨€èªãƒ¢ãƒ‡ãƒ«ï¼ˆLMï¼‰ã®è©³ç´°ã€‚
Model Params HuggingFace NameLlama-3.1 8B meta-llama/Llama-3.1-8B-InstructLlama-3.1 70B meta-llama/Llama-3.1-70B-InstructGemma-2 9B google/Gemma-2-9b-itPhi-3.5-mini 3.8B microsoft/Phi-3.5-mini-instructè¡¨ 7 å„ã‚¹ãƒ†ãƒƒãƒ—ã«ãŠã‘ã‚‹æœ€å¤§ãƒˆãƒ¼ã‚¯ãƒ³é•·ã€‚
STEP Max Token LengthKeyword Generation 50Answer Generation 50Answer validation 30

B IterKey



ã®æ§‹æˆè¦ç´ ã®åˆ†æ

ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ç”Ÿæˆ textscIterKey ã®æ€§èƒ½ã«å¯¾ã™ã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å“è³ªã®å½±éŸ¿ã‚’èª¿æŸ»ã™ã‚‹ãŸã‚ã€æœ€ã‚‚é«˜ã„ãƒªã‚³ãƒ¼ãƒ«ç‡ã‚’é”æˆã—ãŸ Llama-3.1-70B ãƒ¢ãƒ‡ãƒ«ã«ã‚ˆã£ã¦ç”Ÿæˆã•ã‚ŒãŸé«˜å“è³ªãªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ç”¨ã„ã€ä»–ã®ãƒ¢ãƒ‡ãƒ«ã«é©ç”¨ã—ã¦æ¤œè¨¼ã‚’è¡Œã£ãŸã€‚
è¡¨ 8 ã«ç¤ºã™ã‚ˆã†ã«ã€ã™ã¹ã¦ã®ãƒ¢ãƒ‡ãƒ«ã§ç²¾åº¦ã®å‘ä¸ŠãŒè¦‹ã‚‰ã‚Œã€ç‰¹ã« Gemma-2ãƒ¢ãƒ‡ãƒ«ã§ã¯ç´„ 5%ã®æ”¹å–„ãŒç¢ºèªã•ã‚ŒãŸã€‚
ã“ã‚Œã‚‰ã®çµæœã‹ã‚‰ã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®å“è³ªãŒ IterKey ã®æ€§èƒ½ã«ãŠã„ã¦é‡è¦ã§ã‚ã‚‹ã“ã¨ãŒæ˜ã‚‰ã‹ã¨ãªã£ãŸã€‚
å›ç­”æ¤œè¨¼ LLM ã®å›ç­”æ¤œè¨¼èƒ½åŠ›ã‚’è©•ä¾¡ã™ã‚‹ãŸã‚ã€â€˜Trueâ€™ã¨åˆ¤å®šã•ã‚ŒãŸå¾Œã§ã‚‚æœ€å¤§5å›ã®åå¾©ã‚’è¡Œã„ã€è¡¨ 8 Llama-3.1-70B ã‹ã‚‰ã® IterKey w/ HQ Keywordsï¼ã“ã®æ‰‹æ³•ã¯ã€æœ€ã‚‚é«˜ã„ãƒªã‚³ãƒ¼ãƒ«ã‚’é”æˆã—ãŸ Llama-3.1-70B ã®é«˜å“è³ªãªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ•°ãŒ 10 åˆ†ã® 1ã®å°è¦æ¨¡ãƒ¢ãƒ‡ãƒ«ã«é©ç”¨ã™ã‚‹ã€‚
Method Model Entity Hotpot Natural WebBaseLlama-3.1 (8B) 61.0 52.3 51.6 52.2Llama-3.1 (70B) 62.1 54.5 54.7 56.0Gemma-2 34.2 24.6 33.7 33.8Phi-3.5 49.6 43.9 34.8 41.4HQ KeywordsLlama-3.1 (8B) +2.6 63.6 +2.5 54.8 +0.6 52.2 +1.5 53.7Llama-3.1 (70B) 62.1 54.5 54.7 56.0Gemma-2 +4.9 39.1 +5.6 30.2 +3.8 37.5 +4.2 38.0Phi-3.5 +1.2 50.8 +0.7 44.6 +3.2 38.0 +2.4 43.8è¡¨ 9 ç•°ãªã‚‹ãƒ¢ãƒ‡ãƒ«ã¨è¨­å®šã§ã® 4 ã¤ã® QA ã‚¿ã‚¹ã‚¯ã«ãŠã‘ã‚‹ç²¾åº¦çµæœã€‚
è¨­å®šã®èª¬æ˜: â€˜Baseâ€™: æ¤œè¨¼ã‚¹ãƒ†ãƒƒãƒ—ã§æœ€åˆã«ã€ŒTrueã€ã¨åˆ¤å®šã•ã‚ŒãŸæ™‚ç‚¹ã§åå¾©ã‚’åœæ­¢ã€‚
â€˜Veriï¬edTrueâ€™:ã€ŒTrueã€ã¨åˆ¤å®šã•ã‚ŒãŸåå¾©ã®ä¸­ã«æ­£è§£ãŒå«ã¾ã‚Œã‚‹ã‹ã‚’ç¢ºèªã€‚
â€˜Veriï¬edAllâ€™: ã™ã¹ã¦ã®åå¾©çµæœï¼ˆã€ŒTrueã€ã¨ã€ŒFalseã€ï¼‰ã‚’ç¢ºèªã—ã€æ­£è§£ãŒå«ã¾ã‚Œã‚‹ã‹ã‚’è©•ä¾¡ã€‚
Setting Model Entity QA HotpotQA Natural QA WebQABaseLlama-3.1 (8B) 61.0 52.3 51.6 52.2Llama-3.1 (70B) 62.1 54.5 54.7 56.0Gemma-2 34.2 24.6 33.7 33.8Phi-3.5-mini 49.6 43.9 34.8 41.4Veriï¬edTrueLlama-3.1 (8B) +2.9 63.9 +5.2 57.5 +5.3 56.9 +6.6 58.8Llama-3.1 (70B) +3.7 65.8 +4.6 59.1 +4.1 58.8 +6.6 62.6Gemma-2 +8.2 42.4 +8.7 33.3 +5.4 39.1 +6.2 40.0Phi-3.5-mini +4.9 54.5 +3.2 47.1 +5.9 40.7 +5.4 46.8Veriï¬edAllLlama-3.1 (8B) +5.2 66.2 +6.3 58.6 +8.5 60.1 +8.5 60.7Llama-3.1 (70B) +5.6 67.7 +6.0 60.5 +9.1 63.8 +8.2 64.2Gemma-2 +15.2 49.4 +16.9 41.5 +10.1 43.8 +13.9 47.7Phi-3.5-mini +7.0 56.6 +5.3 49.2 +9.5 44.3 +9.0 50.4å„ãƒ¢ãƒ‡ãƒ«ã®æ¤œè¨¼æ€§èƒ½ã‚’ 3 ã¤ã®è¨­å®šã§æ¯”è¼ƒã—ãŸã€‚
è¡¨ 9ã«ç¤ºã™ã‚ˆã†ã«ã€â€˜Baseâ€™ ã¨ â€˜Veriï¬edAllâ€™ ã‚’æ¯”è¼ƒã™ã‚‹ã¨ã€ã™ã¹ã¦ã®ãƒ¢ãƒ‡ãƒ«ã§æ¤œè¨¼ç²¾åº¦ã®ä½ä¸‹ãŒç¢ºèªã•ã‚Œã€ç‰¹ã«Gemma-2 ã§ã¯ HotpotQA ã§æœ€å¤§ 16.9%ï¼ŒEntity QA ã§15.2%ã®ä½ä¸‹ãŒè¦‹ã‚‰ã‚ŒãŸã€‚
ã“ã®çµæœã¯ã€å›ç­”æ¤œè¨¼ã‚¹ãƒ†ãƒƒãƒ—ã«ãŠã‘ã‚‹ã‚¨ãƒ©ãƒ¼ã®å½±éŸ¿ãŒå¤§ããã€ç‰¹ã«æ€§èƒ½ãŒä½ã„ãƒ¢ãƒ‡ãƒ«ã§ã¯æ¤œè¨¼ç²¾åº¦ã®å‘ä¸ŠãŒèª²é¡Œã§ã‚ã‚‹ã“ã¨ã‚’ç¤ºã—ã¦ã„ã‚‹ã€‚
ã¾ãŸã€â€˜Baseâ€™ ã¨ â€˜Veriï¬edTrueâ€™ ã®æ¯”è¼ƒã«ã‚ˆã‚Šã€â€˜Trueâ€™ ã¨èª¤åˆ¤å®šã•ã‚Œã‚‹å‰²åˆï¼ˆmiss True rateï¼‰ã‚’æ¸¬å®šã—ã€â€˜Veriï¬edTrueâ€™ ã¨ â€˜Veriï¬edAllâ€™ ã®æ¯”è¼ƒã§ã¯ã€â€˜Falseâ€™ ã‚’ â€˜Trueâ€™ ã¨èª¤åˆ¤å®šã™ã‚‹å‰²åˆï¼ˆmiss False rateï¼‰ã‚’è©•ä¾¡ã—ãŸã€‚
Gemma-2 ä»¥å¤–ã®ãƒ¢ãƒ‡ãƒ«ã§ã¯ã€miss Truerate ãŒ miss False rate ã‚’ä¸€è²«ã—ã¦ä¸Šå›ã‚Šã€ä¸æ­£ç¢ºãªå›ç­”ã‚’æ­£ã—ã„ã¨èªè­˜ã™ã‚‹å‚¾å‘ãŒè¦‹ã‚‰ã‚ŒãŸã€‚
ã“ã‚ŒãŒç²¾åº¦å‘ä¸Šã®éšœå£ã¨ãªã£ã¦ã„ã‚‹ã€‚
ä¸€æ–¹ã€Gemma-2 ã§ã¯ missFalse rate ãŒé«˜ãã€æ­£è§£ã‚’è¦‹é€ƒã™å‚¾å‘ãŒç¤ºã•ã‚ŒãŸã€‚
ã“ã‚Œã‚‰ã‹ã‚‰ã€å›ç­”æ¤œè¨¼ã‚¨ãƒ©ãƒ¼ã€ç‰¹ã« miss True rate ãŒå¤šãã®ãƒ¢ãƒ‡ãƒ«ã§ç²¾åº¦å‘ä¸Šã®èª²é¡Œã¨ãªã£ã¦ãŠã‚Šã€å›ç­”æ¤œè¨¼ã®ã•ã‚‰ãªã‚‹æ”¹è‰¯ãŒå¿…è¦ã§ã‚ã‚‹ã“ã¨ãŒç¤ºã•ã‚ŒãŸã€‚